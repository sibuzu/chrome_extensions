{"version":3,"file":"sidebar.js","mappings":"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A;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,GAAG;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,QAAQ,UAAU;AAC7B,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA,wBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,kBAAkB;AAClB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,WAAW;AACtB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB,WAAW;AACX;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjnBa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf;AACA;AACA;AACA,UAAU,QAAQ,oFAAoF,iCAAiC;AACvI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAe;;;;;;;;;;;AC5BF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,yBAAyB,GAAG,wBAAwB,GAAG,kBAAkB,GAAG,qBAAqB;AACjG;AACA;AACA,wCAAwC;AACxC;;AAEA,qBAAqB;AACrB,kCAAkC;AAClC;;AAEA,kBAAkB;AAClB,8CAA8C;AAC9C;;AAEA,wBAAwB;AACxB;AACA,yBAAyB;;;;;;;;;;;ACrBZ;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,yCAAwC;AACxC;AAC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AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB,gBAAgB,aAAa;AAC7B;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,8EAA8E;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA,kBAAe;;;;;;;;;;;AC7QF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,mCAAmC;;AAEnC,gCAAgC;;AAEhC,kCAAkC;;AAElC,mCAAmC,0BAA0B,8CAA8C,gBAAgB,OAAO,oBAAoB;;AAEtJ;AACA;AACA;AACA,uEAAuE,aAAa;AACpF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;;;AAGA;AACA,oGAAoG,eAAe;AACnH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;AC9Da;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,iCAAiC,GAAG,gCAAgC,GAAG,2BAA2B,GAAG,2BAA2B;AAChI;AACA,qCAAqC;;AAErC,2BAA2B;AAC3B;AACA,2BAA2B;AAC3B;AACA,gCAAgC;AAChC;AACA,iCAAiC;;;;;;;;;;;ACfpB;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,iBAAiB,mBAAO,CAAC,8EAAc;;AAEvC;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;;;;;;;;;;;ACtCa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,iBAAiB,mBAAO,CAAC,8EAAc;;AAEvC;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;AACH;AACA;;;;;;;;;;;AC9Ba;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;AC5Ba;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,iBAAiB,mBAAO,CAAC,yEAAc;;AAEvC,qBAAqB,mBAAO,CAAC,2EAAkB;;AAE/C,YAAY,mBAAO,CAAC,yDAAS;;AAE7B,mCAAmC,mBAAO,CAAC,uGAAgC;;AAE3E,uCAAuC,uCAAuC;;AAE9E;AACA;AACA,YAAY,QAAQ;AACpB,YAAY,UAAU;AACtB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ,2BAA2B,sDAAsD;AACpG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC;AACA,OAAO;AACP;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;;AAGP,mDAAmD;;AAEnD,gDAAgD;;AAEhD;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;;AAGA,0BAA0B;AAC1B;AACA;AACA;;AAEA;AACA,2DAA2D,gEAAgE;AAC3H;AACA;AACA;AACA;AACA,SAAS;AACT,yCAAyC;AACzC;AACA;AACA,SAAS;AACT;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG;AACN;AACA,2CAA2C,qBAAqB;AAChE;;AAEA,kBAAe;;;;;;UClOf;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCzCA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;;;;;;;;;;;;;;;ACrFA;AACA;AACA;AACA;;AAEA;AAMyB;AAC8C;AACU;AACI;AACZ;AACoB;AACqB;;AAElH;AACA,MAAMO,qBAAqB,GAAG,MAAAA,CAAA,KAAY;EACxC,MAAMC,SAAS,GAAG,MAAM/Y,kDAAM,CAAC4C,oBAAoB,CAAC,CAAC;EACrD,OAAOmW,SAAS,IAAI,IAAI;AAC1B,CAAC;;AAED;AACA,CAAC,YAAY;EACX,IAAI,CAAC7K,MAAM,CAACC,KAAK,EAAE;IACjB,MAAM6K,WAAW,GAAG,MAAMF,qBAAqB,CAAC,CAAC;IACjD7b,OAAO,CAACC,GAAG,CAAC,uCAA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","sources":["webpack://youtube-subtitles-extension/./lib/config.js","webpack://youtube-subtitles-extension/./lib/errors.js","webpack://youtube-subtitles-extension/./lib/index.js","webpack://youtube-subtitles-extension/./lib/services/mockService.js","webpack://youtube-subtitles-extension/./lib/services/storeService.js","webpack://youtube-subtitles-extension/./lib/services/transcriptService.js","webpack://youtube-subtitles-extension/./lib/ui/alerts.js","webpack://youtube-subtitles-extension/./lib/ui/configManager.js","webpack://youtube-subtitles-extension/./lib/ui/fontManager.js","webpack://youtube-subtitles-extension/./lib/ui/theme.js","webpack://youtube-subtitles-extension/../node_modules/lodash.assignin/index.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/alias/alias.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/constants/index.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/index.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/serialization.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/store/Store.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/store/applyMiddleware.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/strategies/constants.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/strategies/shallowDiff/diff.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/strategies/shallowDiff/patch.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/util.js","webpack://youtube-subtitles-extension/../node_modules/webext-redux/lib/wrap-store/wrapStore.js","webpack://youtube-subtitles-extension/webpack/bootstrap","webpack://youtube-subtitles-extension/webpack/runtime/define property getters","webpack://youtube-subtitles-extension/webpack/runtime/ensure chunk","webpack://youtube-subtitles-extension/webpack/runtime/get javascript chunk filename","webpack://youtube-subtitles-extension/webpack/runtime/global","webpack://youtube-subtitles-extension/webpack/runtime/hasOwnProperty shorthand","webpack://youtube-subtitles-extension/webpack/runtime/load script","webpack://youtube-subtitles-extension/webpack/runtime/make namespace object","webpack://youtube-subtitles-extension/webpack/runtime/publicPath","webpack://youtube-subtitles-extension/webpack/runtime/jsonp chunk loading","webpack://youtube-subtitles-extension/./sidebar.js"],"sourcesContent":["/**\n * Configuration for the Chrome extension\n */\n\nconst isDev = chrome.runtime.getManifest().version.includes('-dev') \n  || location.hostname === 'localhost'\n  || chrome.runtime.id === 'efmnkbmjoghelgmbhigioddcidenphle';\n\nif (isDev) { console.log('[Config] isDev:', isDev); }\n\n// Constants for configuration\nexport const CURRENT_CONFIG_VERSION = '1.0';\nexport const SUPPORTED_LANGUAGES = ['en', 'zh-cn', 'zh-tw', 'zh-hk', 'ko', 'ja', 'fr', 'es', 'th'];\nexport const FONT_SIZES = [12, 14, 16, 18, 20];\nexport const DEFAULT_FONT_SIZE = 14;\nexport const DEFAULT_SRT_PROVIDER = undefined;\n\n// API configuration\nexport const API_CONFIG = {\n  // Use development URL when in dev mode\n  BASE_URL: isDev ? 'http://127.0.0.1:3003' : 'https://worker.deepsrt.com',\n  // BASE_URL: isDev ? 'https://preview.srt-client-proxy.pages.dev' : 'https://worker.deepsrt.com',\n  // BASE_URL: isDev ? 'https://worker.deepsrt.com' : 'https://worker.deepsrt.com',\n  \n  ENDPOINTS: {\n    TRANSCRIBE: '/transcribe',\n    TRANSLATE: '/transcript',\n    TRANSCRIPT: '/transcript',\n    SUMMARIZE: '/transcript'\n  }\n};\n\n// Subtitles configuration\nexport const SUBTITLES_CONFIG = {\n  BATCH_SIZE: 10,\n  MAX_CONCURRENT_BATCHES: 3,\n  UPDATE_INTERVAL: 100,\n  ENABLE_LIVE_SUBTITLES: false,\n  STYLES: {\n    CONTAINER: {\n      position: 'absolute',\n      bottom: '60px',\n      left: '0',\n      right: '0',\n      textAlign: 'center',\n      zIndex: '1000',\n      pointerEvents: 'none',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      padding: '10px'\n    },\n    SUBTITLE_BLOCK: {\n      backgroundColor: 'rgba(0, 0, 0, 0.75)',\n      padding: '4px 10px',\n      borderRadius: '4px',\n      width: 'fit-content',\n      margin: '0 auto'\n    },\n    ZH_TW: {\n      fontSize: '25px',\n      fontFamily: '\"YouTube Noto\", Roboto, Arial, Helvetica, Verdana, \"PT Sans Caption\", sans-serif',\n      color: 'white',\n      textShadow: '2px 2px 2px rgba(0,0,0,0.8)',\n      marginBottom: '2px',\n      display: 'block'\n    },\n    EN: {\n      fontSize: '25px',\n      fontFamily: '\"YouTube Noto\", Roboto, Arial, Helvetica, Verdana, \"PT Sans Caption\", sans-serif',\n      color: 'white',\n      textShadow: '2px 2px 2px rgba(0,0,0,0.8)',\n      display: 'block'\n    }\n  }\n};\n\n// Helper functions\nexport async function toggleLiveCaptions() {\n  const currentState = await Config.getLiveCaptionsEnabled();\n  const newState = !currentState;\n  \n  console.log('[Config] Toggling live captions from:', currentState, 'to:', newState);\n  \n  SUBTITLES_CONFIG.ENABLE_LIVE_SUBTITLES = newState;\n  await Config.setLiveCaptionsEnabled(newState);\n  \n  // Notify content script\n  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\n    if (tabs[0]) {\n      chrome.tabs.sendMessage(tabs[0].id, {\n        type: 'TOGGLE_CAPTIONS',\n        enabled: newState\n      });\n    }\n  });\n  \n  return newState;\n}\n\nexport function forceLiveCaptionsDisabled() {\n  Config.setLiveCaptionsEnabled(false);\n  return false;\n}\n\nexport class Config {\n  static defaultPreferences = {\n    version: CURRENT_CONFIG_VERSION,\n    preferences: {\n      language: {\n        value: 'en',\n        lastUpdated: Date.now()\n      },\n      liveCaptions: {\n        value: false,\n        lastUpdated: Date.now()\n      },\n      fontSize: {\n        value: DEFAULT_FONT_SIZE,\n        lastUpdated: Date.now(),\n        allowedValues: FONT_SIZES\n      },\n      bulletList: {\n        value: false,\n        lastUpdated: Date.now()\n      },\n      srtProvider: {\n        value: DEFAULT_SRT_PROVIDER,\n        lastUpdated: Date.now()\n      }\n    }\n  };\n\n  static async get() {\n    try {\n      console.log('[Config] Getting configuration from storage');\n      const { config } = await chrome.storage.local.get('config');\n      console.log('[Config] Retrieved config from storage:', config);\n      \n      if (!config) {\n        console.log('[Config] No configuration found, using default preferences');\n        return this.defaultPreferences;\n      }\n\n      // Version check and migration\n      if (config.version !== CURRENT_CONFIG_VERSION) {\n        console.log('[Config] Config version mismatch, migrating');\n        return this.migrateConfig(config);\n      }\n\n      // Check if srtProvider exists in the config\n      if (!config.preferences.srtProvider) {\n        console.log('[Config] SRT provider not found in config, adding default');\n        config.preferences.srtProvider = {\n          value: DEFAULT_SRT_PROVIDER,\n          lastUpdated: Date.now()\n        };\n        await this.save(config);\n      }\n\n      return config;\n    } catch (error) {\n      console.error('[Config] Error getting configuration:', error);\n      return this.defaultPreferences;\n    }\n  }\n\n  static async save(config) {\n    try {\n      console.log('[Config] Saving configuration:', JSON.stringify(config));\n      await chrome.storage.local.set({ config });\n      console.log('[Config] Configuration saved successfully');\n      return config;\n    } catch (error) {\n      console.error('[Config] Error saving configuration:', error);\n      throw error;\n    }\n  }\n\n  static async initialize() {\n    console.log('[Config] Initializing configuration');\n    \n    // Check if config already exists\n    const { config } = await chrome.storage.local.get('config');\n    \n    if (!config) {\n      console.log('[Config] No configuration found, creating default');\n      // Create default configuration\n      await this.save(this.defaultPreferences);\n      return this.defaultPreferences;\n    }\n    \n    // Check if any new preferences have been added since the last initialization\n    let updated = false;\n    \n    // Check for missing preferences and add them with default values\n    for (const key in this.defaultPreferences.preferences) {\n      if (!config.preferences[key]) {\n        console.log(`[Config] Adding missing preference: ${key}`);\n        config.preferences[key] = this.defaultPreferences.preferences[key];\n        updated = true;\n      }\n    }\n    \n    // If configuration was updated, save it\n    if (updated) {\n      console.log('[Config] Configuration updated with missing preferences, saving');\n      await this.save(config);\n    }\n    \n    return config;\n  }\n\n  static async migrateConfig(oldConfig) {\n    console.log('[Config] Migrating from version:', oldConfig.version);\n    \n    // Create new config with current version\n    const newConfig = {\n      version: CURRENT_CONFIG_VERSION,\n      preferences: {\n        language: {\n          value: oldConfig.preferredCaptionLanguage || 'en',\n          lastUpdated: Date.now()\n        },\n        liveCaptions: {\n          value: oldConfig.liveCaptionsEnabled || false,\n          lastUpdated: Date.now()\n        },\n        fontSize: {\n          value: parseInt(localStorage.getItem('summaryFontSize')) || DEFAULT_FONT_SIZE,\n          lastUpdated: Date.now(),\n          allowedValues: FONT_SIZES\n        },\n        bulletList: {\n          value: oldConfig.bulletListEnabled || false,\n          lastUpdated: Date.now()\n        },\n        srtProvider: {\n          value: DEFAULT_SRT_PROVIDER,\n          lastUpdated: Date.now()\n        }\n      }\n    };\n\n    await this.save(newConfig);\n    return newConfig;\n  }\n\n  static async getPreferredLanguage() {\n    const config = await this.get();\n    return config.preferences.language.value;\n  }\n\n  static async setPreferredLanguage(lang) {\n    const validLang = SUPPORTED_LANGUAGES.includes(lang) ? lang : 'en';\n    const config = await this.get();\n    \n    config.preferences.language = {\n      value: validLang,\n      lastUpdated: Date.now()\n    };\n    \n    await this.save(config);\n    return validLang;\n  }\n\n  static async getLiveCaptionsEnabled() {\n    const config = await this.get();\n    return config.preferences.liveCaptions.value;\n  }\n\n  static async setLiveCaptionsEnabled(enabled) {\n    const config = await this.get();\n    \n    config.preferences.liveCaptions = {\n      value: !!enabled,\n      lastUpdated: Date.now()\n    };\n    \n    await this.save(config);\n    return !!enabled;\n  }\n\n  static async getFontSize() {\n    const config = await this.get();\n    return config.preferences.fontSize.value;\n  }\n\n  static async setFontSize(size) {\n    const validSize = FONT_SIZES.includes(size) ? size : DEFAULT_FONT_SIZE;\n    const config = await this.get();\n    \n    config.preferences.fontSize = {\n      value: validSize,\n      lastUpdated: Date.now(),\n      allowedValues: FONT_SIZES\n    };\n    \n    await this.save(config);\n    return validSize;\n  }\n\n  static async getBulletListEnabled() {\n    const config = await this.get();\n    return config.preferences.bulletList?.value ?? false;\n  }\n\n  static async setBulletListEnabled(enabled) {\n    const config = await this.get();\n    config.preferences.bulletList = {\n      value: enabled,\n      lastUpdated: Date.now()\n    };\n    await this.save(config);\n    return enabled;\n  }\n\n  static async getSrtProvider() {\n    try {\n      const config = await this.get();\n      console.log('[Config] Getting SRT provider from config:', config);\n      \n      // Check if srtProvider exists in the config\n      if (!config.preferences.srtProvider) {\n        console.log('[Config] SRT provider not found in config, returning default');\n        return DEFAULT_SRT_PROVIDER;\n      }\n      \n      console.log('[Config] Retrieved SRT provider value:', config.preferences.srtProvider.value);\n      return config.preferences.srtProvider.value;\n    } catch (error) {\n      console.error('[Config] Error getting SRT provider:', error);\n      return DEFAULT_SRT_PROVIDER;\n    }\n  }\n\n  static async setSrtProvider(provider) {\n    console.log('[Config] Setting SRT provider:', provider);\n    const config = await this.get();\n    console.log('[Config] Current config before update:', JSON.stringify(config));\n    \n    config.preferences.srtProvider = {\n      value: provider,\n      lastUpdated: Date.now()\n    };\n    \n    console.log('[Config] Updated config before save:', JSON.stringify(config));\n    await this.save(config);\n    \n    // Verify the save worked by reading it back\n    const verifyConfig = await this.get();\n    console.log('[Config] Verified config after save:', JSON.stringify(verifyConfig));\n    \n    return provider;\n  }\n}\n","/**\n * Custom error for YouTube transcript issues\n */\nexport class YouTubeTranscriptError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'YouTubeTranscriptError';\n  }\n}\n\nexport default YouTubeTranscriptError;\n","import { YouTubeTranscriptError } from './errors.js';\n\n/**\n * Fetches and formats YouTube video transcripts\n */\nexport default class TranscriptFetcher {\n  constructor(playerData, videoId, options = {}) {\n    // Initialize transcript fetcher\n    this.session = null;\n    this.pageHtml = options.pageHtml;\n    this.playerData = playerData;\n    this.videoId = videoId;\n    this.preferredLanguage = options.language || 'en';\n    this.cache = new Map();\n    this.transcriptUrl = null; // Store the transcript URL\n    this.transcriptArg = null;\n    this.transcriptXML = null;\n\n    console.log('[TranscriptFetcher] Initialized with:', {\n      videoId,\n      language: this.preferredLanguage,\n    });\n  }\n\n  /**\n   * Parse YouTube XML subtitles into array format\n   * @param {string} xml - The XML response from YouTube\n   * @returns {Array} Array of transcript segments\n   * @private\n   */\n  static parseYouTubeXML(xml) {\n    // Extract text elements using regex\n    const textElements = [];\n    const regex = /<text start=\"([^\"]+)\"(?:\\s+dur=\"([^\"]+)\")?>([^<]+)<\\/text>/g;\n    let match;\n\n    while ((match = regex.exec(xml)) !== null) {\n      const start = parseFloat(match[1]);\n      const duration = match[2] ? parseFloat(match[2]) : 0;\n      const text = match[3].replace(/&amp;/g, '&')\n        .replace(/&lt;/g, '<')\n        .replace(/&gt;/g, '>')\n        .replace(/&quot;/g, '\"')\n        .replace(/&#39;/g, '\\'');\n\n      textElements.push({\n        start,\n        duration,\n        text\n      });\n    }\n\n    return textElements;\n  }\n\n  // Get the arg part from the transcript URL\n  getTranscriptArg() {\n    console.log('[TranscriptFetcher] Getting transcript arg:', this.transcriptArg);\n    return this.transcriptArg;\n  }\n\n  /**\n   * Fetch transcript for a video\n   * @param {string} videoId - YouTube video ID\n   * @returns {Promise<Array>} Transcript data\n   */\n  async fetchTranscript(videoId) {\n    console.log('[TranscriptFetcher] Fetching transcript for video:', videoId);\n    try {\n      // Use player data if available\n      if (this.playerData?.captions) {\n        const captionsJson = this.playerData.captions.playerCaptionsTracklistRenderer;\n        if (captionsJson) {\n          console.debug('[TranscriptFetcher] Using player data captions');\n          this.transcriptUrl = TranscriptFetcher._getTranscriptUrl(captionsJson, this.preferredLanguage);\n          const xml = await this.getTranscript({ baseUrl: this.transcriptUrl });\n          return TranscriptFetcher.parseYouTubeXML(xml);\n        }\n      }\n\n      // Fallback to HTML fetch\n      // Fallback to HTML fetch\n      const html = await this._fetchVideoHtml(videoId);\n      const captionsJson = TranscriptFetcher._extractCaptionsJson(html);\n      console.debug('[TranscriptFetcher] Extracted captions');\n      if (!captionsJson) {\n        throw new Error('No captions found in video');\n      }\n      this.transcriptUrl = TranscriptFetcher._getTranscriptUrl(captionsJson, this.preferredLanguage);\n      const xml = await this.getTranscript({ baseUrl: this.transcriptUrl });\n      return TranscriptFetcher.parseYouTubeXML(xml);\n    } catch (error) {\n      console.error('[TranscriptFetcher] Error:', error);\n      if (error instanceof YouTubeTranscriptError) {\n        throw error;\n      }\n      throw new YouTubeTranscriptError(error.message);\n    }\n  }\n\n  /**\n   * Get transcript URL from captions JSON\n   * @param {object} captionsData - Track data or captions JSON\n   * @returns {string} Transcript URL\n   * @private\n   */\n  static _getTranscriptUrl(captionsData, preferredLang = 'en') {\n    // If we're passed a track object directly, use its baseUrl\n    if (captionsData.baseUrl) {\n      console.log('[TranscriptFetcher] Using direct track baseUrl:', {\n        baseUrl: captionsData.baseUrl,\n        preferredLang\n      });\n      return captionsData.baseUrl;\n    }\n\n    console.log('[TranscriptFetcher] Searching for track in language:', preferredLang);\n\n    // Otherwise expect a captions JSON object\n    if (!captionsData?.captionTracks?.length) {\n      console.error('[TranscriptFetcher] No caption tracks:', captionsData);\n      throw new Error('No caption tracks available');\n    }\n\n    // Find track in preferred language\n    const normalizedWanted = preferredLang.toLowerCase();\n    let selectedTrack = captionsData.captionTracks.find(t => (\n      t.languageCode.toLowerCase() === normalizedWanted\n    ));\n\n    if (!selectedTrack) {\n      // Log available languages and fallback\n      const tracks = captionsData.captionTracks;\n      const availableLangs = tracks\n        .map(t => t.languageCode)\n        .join(', ');\n      console.log('[TranscriptFetcher] Language not found:', { \n        wanted: preferredLang,\n        available: availableLangs \n      });\n\n      // Try English or fall back to first available\n      // Try English first\n      selectedTrack = captionsData.captionTracks.find(t => (\n        t.languageCode === 'en' || \n        t.languageCode === 'en-US'\n      ));\n      \n      // Fallback to first available\n      if (!selectedTrack) {\n        selectedTrack = captionsData.captionTracks[0];\n      }\n    }\n\n    if (!selectedTrack?.baseUrl) {\n      console.error('[TranscriptFetcher] No suitable track found:', captionsData.captionTracks);\n      throw new Error('No suitable caption track found');\n    }\n\n    // Log selected track details\n    const selectedLang = selectedTrack.languageCode;\n    const targetLang = preferredLang.toLowerCase();\n    const isPreferredLang = selectedLang === targetLang;\n\n    const trackInfo = {\n      language: selectedLang,\n      kind: selectedTrack.kind,\n      preferred: isPreferredLang\n    };\n    console.log('[TranscriptFetcher] Selected track:', trackInfo);\n    return selectedTrack.baseUrl;\n  }\n\n  /**\n   * Get transcript from URL or track data\n   * @param {object} track - Track data\n   * @returns {Promise<Array>} Transcript data\n   */\n  async getTranscript(track) {\n    try {\n      if (!this.session) {\n        this.session = await this._createSession();\n      }\n\n      const url = track.baseUrl;\n      console.debug('[TranscriptFetcher] Fetching transcript');\n\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch transcript: ${response.status}`);\n      }\n\n      // Store the raw XML\n      this.transcriptXML = await response.text();\n      console.debug('[TranscriptFetcher] Received transcript XML');\n      \n      // Store the arg part for the /transcribe endpoint\n      const urlParts = url.split('?');\n      if (urlParts.length < 2) {\n        throw new Error('Invalid transcript URL format');\n      }\n      this.transcriptArg = urlParts[1];\n      console.debug('[TranscriptFetcher] Extracted transcript arg');\n\n      return this.transcriptXML;\n    } catch (error) {\n      console.error('[TranscriptFetcher] Fetch error:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Decode HTML entities in text\n   * @param {string} text - Text to decode\n   * @returns {string} Decoded text\n   * @private\n   */\n  static _decodeHtmlEntities(text) {\n    const textarea = document.createElement('textarea');\n    textarea.innerHTML = text;\n    return textarea.value;\n  }\n\n  /**\n   * Fetch and format transcript\n   * @param {string} videoId - YouTube video ID\n   * @param {string} format - Output format\n   * @returns {Promise<string>} Formatted transcript\n   */\n  async fetchTranscriptWithFormat(videoId, format = 'text') {\n    try {\n      const transcript = await this.fetchTranscript(videoId);\n      let formatted;\n\n      switch (format) {\n      case 'srt':\n        formatted = TranscriptFetcher.formatSRT(transcript);\n        break;\n      case 'json':\n        formatted = JSON.stringify(transcript, null, 2);\n        break;\n      case 'text':\n      case 'digest':\n        formatted = TranscriptFetcher.formatDigest(transcript);\n        break;\n      default:\n        formatted = transcript;\n      }\n\n      return formatted;\n    } catch (error) {\n      console.error('Error fetching transcript:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Format transcript as SRT\n   * @param {Array} transcript - Transcript data\n   * @returns {string} SRT formatted transcript\n   */\n  static formatSRT(transcript) {\n    return transcript\n      .map((entry, index) => {\n        const startTime = TranscriptFetcher._formatTimestamp(entry.start);\n        const endTime = TranscriptFetcher._formatTimestamp(entry.start + entry.duration);\n        return `${index + 1}\\n${startTime} --> ${endTime}\\n${entry.text}\\n`;\n      })\n      .join('\\n');\n  }\n\n  /**\n   * Format transcript as digest\n   * @param {Array} transcript - Transcript data\n   * @returns {string} Digest formatted transcript\n   */\n  static formatDigest(transcript) {\n    return transcript.map((item) => item.text).join('\\n');\n  }\n\n  /**\n   * Format seconds to SRT timestamp\n   * @param {number} seconds Time in seconds\n   * @returns {string} SRT formatted timestamp\n   * @private\n   */\n  static _formatTimestamp(seconds) {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = Math.floor(seconds % 60);\n    const ms = Math.floor((seconds % 1) * 1000);\n    const hh = hours.toString().padStart(2, '0');\n    const mm = minutes.toString().padStart(2, '0');\n    const ss = secs.toString().padStart(2, '0');\n    const msec = ms.toString().padStart(3, '0');\n    return `${hh}:${mm}:${ss},${msec}`;\n  }\n\n  /**\n   * Fetch video HTML\n   * @param {string} videoId - YouTube video ID\n   * @returns {Promise<string>} Video HTML\n   * @private\n   */\n  async _fetchVideoHtml(videoId) {\n    if (this.pageHtml) {\n      return this.pageHtml;\n    }\n    const url = `https://www.youtube.com/watch?v=${videoId}`;\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch video HTML: ${response.status}`);\n    }\n    return response.text();\n  }\n\n  /**\n   * Extract captions JSON from HTML\n   * @param {string} html - Video page HTML\n   * @returns {object} Captions JSON\n   * @private\n   */\n  static _extractCaptionsJson(html) {\n    try {\n      // Look for ytInitialPlayerResponse\n      const playerResponseMatch = html.match(/ytInitialPlayerResponse\\s*=\\s*({.+?});/);\n      if (!playerResponseMatch) {\n        console.log('[TranscriptFetcher] No ytInitialPlayerResponse found');\n        return null;\n      }\n\n      // Parse the full player response\n      const playerResponse = JSON.parse(playerResponseMatch[1]);\n\n      // Extract captions data\n      const captions = playerResponse?.captions?.playerCaptionsTracklistRenderer;\n      if (!captions) {\n        console.log('[TranscriptFetcher] No captions found in player response');\n        return null;\n      }\n\n      return captions;\n    } catch (e) {\n      console.error('[TranscriptFetcher] Failed to parse captions JSON:', e);\n      return null;\n    }\n  }\n\n  /**\n   * Create a new session\n   * @returns {Promise<object>} Session object\n   * @private\n   */\n  async _createSession() {\n    this.session = {\n      id: Math.random().toString(36).substring(7),\n      timestamp: Date.now(),\n      videoId: this.videoId,\n    };\n    return this.session;\n  }\n\n  /**\n   * Get batch number from timestamp\n   * @param {number} timestamp - Time in seconds\n   * @param {number} batchSize - Number of entries per batch (default 10)\n   * @returns {object} Batch information\n   */\n  async getBatchFromTimestamp(timestamp, batchSize = 10) {\n    const transcript = await this.fetchTranscript(this.videoId);\n\n    // Find the entry containing this timestamp\n    const entryIndex = transcript.findIndex((entry) => {\n      const entryEnd = entry.start + entry.duration;\n      return timestamp >= entry.start && timestamp <= entryEnd;\n    });\n\n    if (entryIndex === -1) {\n      throw new Error('Timestamp not found in transcript');\n    }\n\n    // Calculate batch number (1-based)\n    const batchNumber = Math.floor(entryIndex / batchSize) + 1;\n    const batchStart = (batchNumber - 1) * batchSize;\n    const batchEnd = Math.min(batchStart + batchSize, transcript.length);\n\n    return {\n      batchNumber,\n      entryIndex,\n      entry: transcript[entryIndex],\n      batchRange: {\n        start: batchStart,\n        end: batchEnd,\n      },\n      totalBatches: Math.ceil(transcript.length / batchSize),\n    };\n  }\n\n  /**\n   * Get current batch based on player timestamp\n   * @param {HTMLElement} player - YouTube player element\n   * @param {number} batchSize - Number of entries per batch\n   * @returns {Promise<object>} Batch information\n   */\n  async getCurrentBatch(player, batchSize = 10) {\n    if (!player) {\n      throw new Error('Player element not provided');\n    }\n\n    // Get current time from player\n    const currentTime = player.getCurrentTime();\n    return this.getBatchFromTimestamp(currentTime, batchSize);\n  }\n\n  getTranscriptXML() {\n    console.debug('[TranscriptFetcher] Getting transcript XML');\n    return this.transcriptXML;\n  }\n}\n","import { showAlert } from '../ui/alerts.js';\n\n// Global mock state\nconst mockState = {\n  enabled: false,\n  errorType: '429',\n  target: 'all',\n  targets: {}\n};\n\n// Add user-friendly mock function for console use\nexport function userMock(errorType = '429', target = 'all') {\n  console.log('[Mock] User triggered mock with:', { errorType, target });\n  \n  // If target is 'all', toggle everything. Otherwise only toggle specified target\n  if (target === 'all') {\n    mockState.enabled = !mockState.enabled;\n    mockState.errorType = errorType;\n    mockState.target = target;\n  } else {\n    // Initialize targets if not exists\n    mockState.targets = mockState.targets || {};\n    \n    // Toggle specific target\n    if (mockState.targets[target]) {\n      delete mockState.targets[target];\n    } else {\n      mockState.targets[target] = errorType;\n    }\n    \n    // Update overall enabled state\n    mockState.enabled = Object.keys(mockState.targets).length > 0;\n  }\n  \n  const message = mockState.enabled ? \n    `Mock mode enabled (${errorType})${target !== 'all' ? ` for ${target}` : ''}` : \n    'Mock mode disabled';\n  \n  // Show alert with error styling\n  const alert = showAlert(message, 5000);\n  if (alert) {\n    alert.classList.add('error-alert');\n  }\n  \n  // Update UI to show mock mode state\n  updateMockModeIndicator();\n  \n  console.log('[Mock] Mode:', mockState);\n  return message;\n}\n\n// Mock response functions\nfunction getMockErrorResponse(status = 429) {\n  const errors = {\n    429: {\n      status: 429,\n      error: 'Too many requests. Please wait a moment and try again.',\n      json: () => Promise.resolve({ \n        error: 'Too many requests. Please wait a moment and try again.' \n      })\n    },\n    500: {\n      status: 500,\n      error: 'Internal server error',\n      json: () => Promise.resolve({ error: 'Internal server error' })\n    },\n    404: {\n      status: 404,\n      error: 'Resource not found',\n      json: () => Promise.resolve({ error: 'Resource not found' })\n    }\n  };\n\n  return {\n    ok: false,\n    status: status,\n    ...errors[status],\n  };\n}\n\n// Mock fetch function with target support\nexport async function mockFetch(url, options) {\n  if (mockState.enabled) {\n    // Determine which API is being called\n    const isTranscript = url.includes('/transcript') && options.body;\n    const requestBody = isTranscript ? JSON.parse(options.body) : null;\n    const isSummary = isTranscript && requestBody?.action === 'summarize';\n    const isTranslate = isTranscript && requestBody?.action === 'translate';\n    \n    // Check if this type of request should be mocked\n    const shouldMock = mockState.target === 'all' ||\n      (isSummary && mockState.targets?.summary) ||\n      (isTranslate && mockState.targets?.translate);\n    \n    if (shouldMock) {\n      const errorType = mockState.target === 'all' ? \n        mockState.errorType : \n        mockState.targets[isSummary ? 'summary' : 'translate'];\n        \n      console.log('[Mock] Returning mock error response:', {\n        errorType,\n        requestType: isSummary ? 'summary' : isTranslate ? 'translate' : 'transcript'\n      });\n      return getMockErrorResponse(parseInt(errorType));\n    }\n  }\n  return fetch(url, options);\n}\n\n// Toggle mock mode\nexport function toggleMockMode(errorType = '429') {\n  console.log('[Mock] Toggling mock mode with error type:', errorType);\n  \n  mockState.enabled = !mockState.enabled;\n  mockState.errorType = errorType;\n  \n  // Show indicator\n  showAlert(`Mock mode ${mockState.enabled ? 'enabled' : 'disabled'}${mockState.enabled ? ` (${errorType})` : ''}`, 2000);\n  \n  // Update UI to show mock mode state\n  updateMockModeIndicator();\n  \n  console.log('[Mock] Mode:', mockState);\n}\n\n// Update mock mode indicator\nfunction updateMockModeIndicator() {\n  let indicator = document.querySelector('.mock-indicator');\n  if (!indicator) {\n    indicator = document.createElement('div');\n    indicator.className = 'mock-indicator';\n    document.querySelector('.controls-right')?.prepend(indicator);\n  }\n  \n  if (mockState.enabled) {\n    const targets = mockState.target === 'all' ? \n      `ALL (${mockState.errorType})` :\n      Object.entries(mockState.targets)\n        .map(([target, code]) => `${target}:${code}`)\n        .join(', ');\n    \n    indicator.textContent = `MOCK [${targets}]`;\n    indicator.classList.add('active');\n  } else {\n    indicator.textContent = 'MOCK';\n    indicator.classList.remove('active');\n  }\n}\n\n// Export mock state for external access\nexport const getMockState = () => ({ ...mockState });\n","import { Store } from 'webext-redux';\nimport { handleError } from '../ui/alerts.js';\nimport { Config } from '../config.js';\nimport { updateTranscriptDisplay } from './transcriptService.js';\nimport TranscriptFetcher from '../index.js';\n\n// Initialize global state if not exists\nif (!window.state) {\n  window.state = {\n    lastVideoId: null,\n    lastProcessedTimestamp: null,\n    lastSummary: null,\n    transcriptFetcher: null,\n    isProcessingContent: false,\n    store: null,\n    lastConnectionAttempt: null\n  };\n}\n\n// Local reference to global state\nconst state = window.state;\n\n/**\n * Returns the Redux store instance\n * @returns {Store} The Redux store\n */\nexport function getStore() {\n  return state.store;\n}\n\n// Update basic info\nexport async function updateBasicInfo(elements, storeState) {\n  try {\n    // Reset any error states\n    elements.videoTitle?.classList.remove('error');\n    elements.videoId?.classList.remove('error');\n\n    // Set loading state if no data\n    if (!storeState?.title && !storeState?.videoId) {\n      if (elements.videoTitle) {\n        elements.videoTitle.textContent = 'Loading...';\n        elements.videoTitle.classList.add('loading');\n      }\n      if (elements.videoId) {\n        elements.videoId.textContent = 'Loading...';\n        elements.videoId.classList.add('loading');\n      }\n      return;\n    }\n\n    // Update with actual data\n    if (elements.videoTitle) {\n      elements.videoTitle.textContent = storeState.title || 'Loading...';\n      elements.videoTitle.classList.remove('loading');\n    }\n    if (elements.videoId) {\n      elements.videoId.textContent = `Video ID: ${storeState.videoId || 'Unknown'}`;\n      elements.videoId.classList.remove('loading');\n    }\n  } catch (error) {\n    console.error('[Sidebar] Error updating basic info:', error);\n    // Set error states in UI\n    if (elements?.videoTitle) {\n      elements.videoTitle.textContent = 'Error loading video info';\n      elements.videoTitle.classList.add('error');\n      elements.videoTitle.classList.remove('loading');\n    }\n    if (elements?.videoId) {\n      elements.videoId.textContent = 'Please refresh the page';\n      elements.videoId.classList.add('error');\n      elements.videoId.classList.remove('loading');\n    }\n    throw error;\n  }\n}\n\n// Initialize store subscription\nexport async function initStoreSubscription(elements) {\n  try {\n    // Create store connection\n    state.store = new Store({\n      portName: 'YOUTUBE_SUBTITLES_STORE',\n      reconnectOnDocumentReady: true,\n    });\n\n    // Wait for store to be ready\n    await state.store.ready();\n    console.log('[Sidebar] Store connected successfully', {\n      timestamp: new Date().toISOString(),\n      readyState: state.store.ready ? 'ready' : 'not ready',\n    });\n\n    // Add debounced store handler\n    let updateTimeout = null;\n    state.store.subscribe(() => {\n      if (updateTimeout) {\n        clearTimeout(updateTimeout);\n      }\n      updateTimeout = setTimeout(async () => {\n        const currentState = state.store.getState();\n        console.log('[Sidebar] Store state updated:', {\n          timestamp: new Date().toISOString(),\n          videoId: currentState?.videoId,\n          hasPlayerData: !!currentState?.playerData,\n          hasCaptions: currentState?.hasCaptions\n        });\n\n        if (!currentState) {\n          console.error('[Sidebar] Invalid store state');\n          return;\n        }\n\n        try {\n          // Skip if no video ID\n          if (!currentState?.videoId) {\n            console.log('[Sidebar] Skipping update - no videoId in state');\n            return;\n          }\n          \n          console.log('[Sidebar] Processing store update:', {\n            videoId: currentState.videoId,\n            title: currentState.title,\n            hasCaptions: currentState.hasCaptions,\n            hasPlayerData: !!currentState.playerData,\n            timestamp: currentState.timestamp,\n            hasProxyData: !!(currentState.playerData?.isProxySource) || !!currentState.isProxySource\n          });\n          \n          // Extract proxy data from playerData to root level if needed\n          if (currentState.playerData) {\n            // Check if proxy data exists in playerData but not at root level\n            if (currentState.playerData.isProxySource && !currentState.isProxySource) {\n              console.log('[Sidebar] Extracting proxy data from playerData to root level');\n              currentState.isProxySource = currentState.playerData.isProxySource;\n              currentState.proxyUrl = currentState.playerData.proxyUrl;\n              currentState.transcript = currentState.playerData.transcript;\n            }\n          }\n          \n          // Update basic info first\n          await updateBasicInfo(elements, currentState);\n          \n          // Initialize transcript fetcher if needed\n          if (currentState.videoId !== state.lastVideoId && currentState.playerData?.captions) {\n            console.log('[Sidebar] Initializing transcript fetcher...');\n            const fetcher = new TranscriptFetcher(\n              currentState.playerData,\n              currentState.videoId,\n              { \n                pageHtml: currentState.pageHtml,\n                language: currentState.preferredLanguage \n              }\n            );\n            state.transcriptFetcher = fetcher;\n            window.state.transcriptFetcher = fetcher;\n            state.lastVideoId = currentState.videoId;\n          }\n\n          // Get saved language preference from global state or Config\n          const preferredLang = window.state?.preferredLanguage || await Config.getPreferredLanguage();\n          console.log('[Sidebar] Using language for update:', preferredLang);\n          \n          // Update both states with language preference\n          currentState.preferredLanguage = preferredLang;\n          if (window.state) {\n            window.state.preferredLanguage = preferredLang;\n          }\n          \n          await updateTranscriptDisplay(elements, currentState, state.transcriptFetcher);\n        } catch (error) {\n          console.error('[Sidebar] Error handling store update:', error);\n          // No longer showing error alerts\n          // handleError(error);\n        }\n      }, 300); // Debounce for 300ms\n    });\n\n    // Initialize with current state\n    const initialState = state.store.getState();\n    if (initialState) {\n      console.log('[Sidebar] Processing initial state:', initialState);\n      try {\n        if (initialState.title) {\n          await updateBasicInfo(elements, initialState);\n        }\n        if (initialState.playerData?.captions) {\n          console.log('[Sidebar] Initializing transcript fetcher for initial state...');\n          const fetcher = new TranscriptFetcher(\n            initialState.playerData,\n            initialState.videoId,\n            { \n              pageHtml: initialState.pageHtml,\n              language: initialState.preferredLanguage \n            }\n          );\n          state.transcriptFetcher = fetcher;\n          window.state.transcriptFetcher = fetcher;\n          state.lastVideoId = initialState.videoId;\n        }\n\n        // Get saved language preference\n        const preferredLang = window.state?.preferredLanguage || await Config.getPreferredLanguage();\n        console.log('[Sidebar] Using language for initial state:', preferredLang);\n        \n        // Update both states with language preference\n        initialState.preferredLanguage = preferredLang;\n        if (window.state) {\n          window.state.preferredLanguage = preferredLang;\n        }\n        \n        await updateTranscriptDisplay(elements, initialState, state.transcriptFetcher);\n      } catch (error) {\n        console.error('[Sidebar] Error processing initial state:', error);\n        handleError(error);\n      }\n    }\n\n    return state.store;\n  } catch (error) {\n    console.error('[Sidebar] Error initializing store subscription:', error);\n    handleError(error);\n    throw error;\n  }\n}\n\n// Clean up store subscription\nexport function cleanupStore() {\n  if (state.store) {\n    state.store = null;\n  }\n}\n\n// Get current store state\nexport function getStoreState() {\n  return state.store ? state.store.getState() : null;\n}\n","import { API_CONFIG } from '../config.js';\nimport { mockFetch } from './mockService.js';\nimport { Config } from '../config.js';\n\n// Function to normalize newlines (replace all newlines with spaces)\nfunction normalizeNewlines(text) {\n  return text.replace(/\\n+/g, ' ').trim();\n}\n\n// Function to normalize language codes for API calls\nfunction normalizeLanguageCode(lang) {\n  if (!lang) {\n    console.log('[Sidebar] No language provided, defaulting to \"en\"');\n    return 'en';\n  }\n  \n  // Convert to lowercase for consistent handling\n  const lowerLang = lang.toLowerCase();\n  \n  // Map UI language codes to API language codes\n  let normalizedLang = lowerLang;\n  \n  // Special handling for Chinese variants\n  if (lowerLang === 'zh-cn') {\n    normalizedLang = 'zh-cn'; // Ensure simplified Chinese is correctly mapped\n  } else if (lowerLang === 'zh-tw') {\n    normalizedLang = 'zh-tw'; // Traditional Chinese (Taiwan)\n  } else if (lowerLang === 'zh-hk') {\n    normalizedLang = 'zh-hk'; // Traditional Chinese (Hong Kong)\n  }\n  \n  console.log('[Sidebar] Normalizing language code:', {\n    input: lang,\n    output: normalizedLang\n  });\n  \n  return normalizedLang;\n}\n\n// Toggle convert buttons visibility\nfunction toggleConvertButtons(show) {\n  const convertButtons = document.querySelector('.convert-buttons');\n  if (convertButtons) {\n    if (show) {\n      convertButtons.classList.add('visible');\n    } else {\n      convertButtons.classList.remove('visible');\n    }\n  }\n}\n\n// Function to auto-summarize content\nexport async function autoSummarize(appState, existingTranscript, targetLang = 'en') {\n  // Validate required parameters\n  if (!existingTranscript || !appState.title || (!appState.transcriptArg && !appState.isProxySource)) {\n    console.error('[Sidebar] Missing required data:', {\n      hasTranscript: !!existingTranscript,\n      hasTitle: !!appState.title,\n      hasArg: !!appState.transcriptArg,\n      isProxySource: !!appState.isProxySource\n    });\n    throw new Error('Missing required data for summarization');\n  }\n\n  if (!targetLang) {\n    console.error('[Sidebar] No target language specified');\n    throw new Error('No language specified for summarization');\n  }\n\n  // Get DOM elements\n  const summary = document.querySelector('#summary');\n  const summaryContainer = document.querySelector('.summary-container');\n  const summaryToolbar = document.querySelector('.summary-toolbar');\n\n  // Get bullet list mode from Config or use provided mode\n  let mode;\n  if (appState.mode) {\n    // Use the mode passed from the caller if available\n    mode = appState.mode;\n    console.log('[Sidebar] Using provided mode:', mode);\n  } else {\n    // Otherwise get from config\n    const isBulletMode = await Config.getBulletListEnabled();\n    mode = isBulletMode ? 'bullet' : 'narrative';\n    console.log('[Sidebar] Using config-based mode:', mode);\n  }\n\n  // Reset state and show loading\n  if (summary) {\n    summary.textContent = 'Loading summary...';\n    summaryContainer?.classList.remove('error');\n    summary.classList.remove('error');\n    summary.classList.add('translating');\n    summary.style.fontStyle = 'normal';\n    summary.style.color = 'var(--text-primary)';\n    summaryContainer?.classList.add('visible');\n    summaryToolbar?.classList.add('visible', 'translating');\n  }\n\n  const endpoint = `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.TRANSCRIPT}`;\n  const normalizedLang = normalizeLanguageCode(targetLang);\n\n  try {\n    console.log('[Sidebar] Fetching summary and title in language:', normalizedLang);\n\n    // Log API request details\n    console.log('[Sidebar] Making API3 requests with:', {\n      transcriptArg: appState.transcriptArg,\n      targetLang,\n      normalizedLang,\n      appState\n    });\n\n    // Check if this is a proxy SRT request\n    const isProxyRequest = appState.isProxySource === true;\n    const proxyUrl = isProxyRequest && appState.proxy ? appState.proxy : appState.proxyUrl;\n    \n    console.log('[Sidebar] API request type:', isProxyRequest ? 'proxy SRT' : 'native captions');\n    if (isProxyRequest) {\n      console.log('[Sidebar] Using proxy URL:', proxyUrl);\n      console.log('[Sidebar] Using mode:', mode);\n    }\n    \n    // Make both API calls in parallel using normalized language\n    const [summaryResponse, titleResponse] = await Promise.all([\n      mockFetch(endpoint, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(\n          isProxyRequest && proxyUrl \n            ? {\n              proxy: proxyUrl,\n              action: 'summarize',\n              lang: normalizedLang,\n              mode: mode\n            }\n            : {\n              arg: appState.transcriptArg,\n              action: 'summarize',\n              lang: normalizedLang,\n              mode: mode\n            }\n        ),\n      }),\n      mockFetch(endpoint, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(\n          isProxyRequest && proxyUrl \n            ? {\n              proxy: proxyUrl,\n              txt: appState.title,\n              action: 'translate',\n              lang: normalizedLang,\n              mode: mode\n            }\n            : {\n              arg: appState.transcriptArg,\n              txt: appState.title,\n              action: 'translate',\n              lang: normalizedLang,\n              mode: mode\n            }\n        ),\n      }),\n    ]);\n\n    if (!summaryResponse.ok || !titleResponse.ok) {\n      const errorResponse = !summaryResponse.ok ? summaryResponse : titleResponse;\n      let errorMessage;\n      try {\n        const errorData = await errorResponse.json();\n        errorMessage = errorData.error || `Service is temporarily busy (Code: ${errorResponse.status})`;\n      } catch (e) {\n        errorMessage = `Service is temporarily busy (Code: ${errorResponse.status})`;\n      }\n\n      // Show error in summary container only\n      if (summaryContainer) {\n        summaryContainer.classList.add('visible');\n        summary.textContent = errorMessage;\n        summary.classList.add('error');\n        summaryToolbar?.classList.remove('visible', 'translating');\n      }\n      \n      throw new Error(errorMessage);\n    }\n\n    const [summaryData, titleData] = await Promise.all([\n      summaryResponse.json(),\n      titleResponse.json(),\n    ]);\n\n    const summaryText = summaryData.summary;\n    const translatedTitle = titleData.translation;\n\n    // Update summary with results and remove loading state\n    if (summary && summaryText) {\n      summary.textContent = summaryText;\n      summary.classList.remove('translating');\n      summaryContainer?.classList.add('visible');\n      summaryToolbar?.classList.remove('translating');\n    }\n\n    // Update title\n    if (translatedTitle) {\n      const titleElement = document.querySelector('.video-title');\n      if (titleElement) {\n        const translatedTitleDiv = document.createElement('div');\n        translatedTitleDiv.className = 'translated';\n        translatedTitleDiv.textContent = normalizeNewlines(translatedTitle);\n\n        const originalTitle = document.createElement('div');\n        originalTitle.className = 'original';\n        originalTitle.textContent = appState.title;\n\n        titleElement.innerHTML = '';\n        titleElement.appendChild(translatedTitleDiv);\n        titleElement.appendChild(originalTitle);\n      }\n    }\n  } catch (error) {\n    console.error('[Sidebar] Error generating summary:', error);\n    \n    // Show error in summary container only\n    if (summaryContainer) {\n      summaryContainer.classList.add('visible');\n      summary.textContent = error.message;\n      summary.classList.add('error');\n      summaryToolbar?.classList.remove('visible', 'translating');\n    }\n    \n    throw error;\n  }\n}\n\n// Update transcript display\nexport async function updateTranscriptDisplay(elements, storeState, transcriptFetcher, options = {}) {\n  // Default options\n  const { skipSummaryGeneration = false } = options;\n  \n  if (!storeState?.videoId) {\n    console.error('[Sidebar] No video ID available');\n    throw new Error('No video ID available. Please try refreshing the page.');\n  }\n  \n  try {\n    // Reset error states\n    elements.transcript?.classList.remove('error');\n    \n    if (elements.transcript) {\n      elements.transcript.textContent = 'Loading transcript...';\n    }\n\n    const format = elements.format?.value || 'text';\n    const lang = normalizeLanguageCode(storeState.preferredLanguage);\n    \n    console.log('[Sidebar] Preparing transcript request:', {\n      videoId: storeState.videoId,\n      language: lang,\n      format,\n      hasCaptions: storeState.hasCaptions,\n      isProxySource: storeState.isProxySource,\n      hasProxyData: !!storeState.transcript || !!(storeState.playerData?.transcript)\n    });\n\n    let content = '';\n\n    // Try to fetch native captions first if they're available\n    if (storeState.hasCaptions !== false) {\n      // Try the normal transcript fetching flow\n      if (!transcriptFetcher) {\n        console.error('[Sidebar] TranscriptFetcher is not initialized');\n        throw new Error('Failed to load transcript. Please try refreshing the page.');\n      }\n\n      // Log detailed information about the transcript fetcher state\n      console.log('[Sidebar] Using transcript fetcher:', {\n        hasVideoId: !!transcriptFetcher.videoId,\n        hasPlayerData: !!transcriptFetcher.playerData,\n        preferredLanguage: transcriptFetcher.preferredLanguage,\n        hasCache: transcriptFetcher.cache?.size > 0,\n        hasTranscriptUrl: !!transcriptFetcher.transcriptUrl,\n        hasTranscriptArg: !!transcriptFetcher.transcriptArg,\n        hasTranscriptXML: !!transcriptFetcher.transcriptXML\n      });\n\n      try {\n        // First get the transcript URL and extract the arg\n        console.log('[Sidebar] Attempting to fetch transcript for video:', storeState.videoId);\n        await transcriptFetcher.fetchTranscript(storeState.videoId);\n        const transcriptArg = transcriptFetcher.getTranscriptArg();\n        \n        if (!transcriptArg) {\n          console.error('[Sidebar] Failed to get transcript arg');\n          throw new Error('Failed to get transcript information. Please try refreshing the page.');\n        }\n\n        // Store the arg in the state for later use\n        storeState.transcriptArg = transcriptArg;\n        \n        console.log('[Sidebar] Making transcript request with arg:', {\n          arg: transcriptArg ? transcriptArg.substring(0, 20) + '...' : 'undefined',\n          format,\n          lang\n        });\n\n        // Make the transcript request\n        const response = await mockFetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.TRANSCRIPT}`, {\n          method: 'POST',\n          headers: { \n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          },\n          body: JSON.stringify({\n            arg: transcriptArg,\n            format,\n            lang, // Include language in request\n          }),\n        });\n\n        if (!response.ok) {\n          let errorMessage;\n          try {\n            const errorData = await response.json();\n            errorMessage = errorData.error;\n          } catch (e) {\n            // If we can't parse the error JSON, create a user-friendly message based on status\n            if (response.status === 429) {\n              errorMessage = 'Too many requests. Please wait a moment and try again.';\n            } else {\n              errorMessage = `Failed to fetch transcript (Status ${response.status})`;\n            }\n          }\n          console.error('[Sidebar] Fetch error:', {\n            status: response.status,\n            message: errorMessage\n          });\n          throw new Error(errorMessage);\n        }\n\n        content = await response.text();\n        if (!elements.transcript) {\n          console.error('[Sidebar] Transcript element not found');\n          throw new Error('Transcript element not found');\n        }\n\n        // Format-specific processing\n        if (format === 'text') {\n          // Only normalize newlines for TXT format\n          content = normalizeNewlines(content);\n        } else if (format === 'srt' || format === 'json') {\n          // Preserve original formatting for SRT and JSON\n          content = content.trim();\n        }\n        \n        // Store the transcript and show convert buttons\n        elements.transcript.textContent = content;\n        toggleConvertButtons(true);\n\n        // Then try to generate summary - if it fails, transcript will remain visible\n        if (!skipSummaryGeneration) {\n          try {\n            console.log('[Sidebar] Summary request details:', {\n              videoId: storeState.videoId,\n              title: storeState.title,\n              preferredLanguage: storeState.preferredLanguage,\n              state: storeState\n            });\n\n            const targetLang = storeState.preferredLanguage;\n            console.log('[Sidebar] Calling autoSummarize with language:', targetLang);\n            await autoSummarize({\n              videoId: storeState.videoId,\n              title: storeState.title,\n              transcriptArg,\n              preferredLanguage: targetLang, // Add language to appState\n            }, content, targetLang);\n            \n            console.log('[Sidebar] Summary request details:', {\n              videoId: storeState.videoId,\n              title: storeState.title,\n              preferredLanguage: storeState.preferredLanguage,\n              state: storeState\n            });\n          } catch (error) {\n            console.error('[Sidebar] Error generating summary:', error);\n            return;\n          }\n        }\n        \n        // Successfully fetched and displayed native captions, so return\n        return;\n      } catch (error) {\n        console.error('[Sidebar] Error fetching native captions:', error);\n        // If native captions fail, we'll try proxy SRT as fallback\n      }\n    }\n\n    // Check if we already have proxy data in the store\n    // This is a fallback if native captions are not available or fetch failed\n    if (storeState.isProxySource && (storeState.transcript || storeState.playerData?.transcript)) {\n      console.log('[Sidebar] Using proxy data from store:', {\n        hasRootTranscript: !!storeState.transcript,\n        hasPlayerDataTranscript: !!(storeState.playerData?.transcript)\n      });\n      \n      // Use transcript data from root level or from playerData\n      const proxyData = storeState.transcript || storeState.playerData?.transcript;\n      \n      // Ensure we have the proxyUrl set\n      if (!storeState.proxyUrl && storeState.playerData?.proxyUrl) {\n        storeState.proxyUrl = storeState.playerData.proxyUrl;\n      }\n      \n      try {\n        // Dynamically import the proxy transcript fetcher for parsing\n        const { parseSRTContent } = await import('../proxyTranscriptFetcher.js');\n        \n        // Parse and display the content\n        if (proxyData && elements.transcript) {\n          const parsedContent = parseSRTContent(proxyData, format);\n          if (elements.transcript) {\n            elements.transcript.innerHTML = \n              format === 'text' \n                ? `<div class=\"transcript-text-content\">${parsedContent.trim()}</div>` \n                : parsedContent;\n          }\n          \n          // Set content for summary generation\n          content = proxyData;\n          \n          // Generate summary for proxy content only if not skipping summary generation\n          if (!skipSummaryGeneration) {\n            try {\n              console.log('[Sidebar] Generating summary for proxy SRT content from store:', {\n                videoId: storeState.videoId,\n                title: storeState.title,\n                preferredLanguage: storeState.preferredLanguage\n              });\n              \n              const targetLang = storeState.preferredLanguage;\n              console.log('[Sidebar] Calling autoSummarize with language:', targetLang);\n              \n              await autoSummarize({\n                videoId: storeState.videoId,\n                title: storeState.title,\n                isProxySource: true,\n                preferredLanguage: targetLang,\n                proxyUrl: storeState.proxyUrl\n              }, content, targetLang);\n              \n              console.log('[Sidebar] Summary generation completed for proxy content');\n            } catch (summaryError) {\n              console.error('[Sidebar] Error generating summary for proxy content:', summaryError);\n              // Don't throw here, we still want to display the transcript\n            }\n          } else {\n            console.log('[Sidebar] Skipping summary generation for proxy content (format change)');\n          }\n          \n          // Return early since we've successfully displayed the transcript\n          return;\n        }\n      } catch (error) {\n        console.error('[Sidebar] Error processing proxy data from store:', error);\n        // Continue with normal flow to try native captions as fallback\n      }\n    }\n\n    // Check if captions are not available, try proxy SRT\n    if (storeState.hasCaptions === false) {\n      console.log('[Sidebar] No native captions available, trying proxy SRT', {\n        videoId: storeState.videoId,\n        title: storeState.title,\n        hasCaptions: storeState.hasCaptions,\n        hasPlayerData: !!storeState.playerData\n      });\n      \n      // Ensure we have a valid videoId before attempting to fetch\n      if (!storeState.videoId) {\n        console.error('[Sidebar] Cannot fetch proxy SRT: Missing videoId in store state');\n        return;\n      }\n      \n      // Normalize videoId if it's not in the expected format\n      let videoId = storeState.videoId;\n      if (typeof videoId !== 'string') {\n        console.warn('[Sidebar] videoId is not a string, attempting to convert:', videoId);\n        videoId = String(videoId);\n      }\n      \n      // Check if videoId looks valid (not empty, null, undefined as strings)\n      if (videoId === 'null' || videoId === 'undefined' || videoId.trim() === '') {\n        console.error('[Sidebar] Invalid videoId format:', videoId);\n        return;\n      }\n      \n      try {\n        // Dynamically import the proxy transcript fetcher\n        const { fetchProxySRT, parseSRTContent } = await import('../proxyTranscriptFetcher.js');\n        \n        try {\n          // Fetch the proxy SRT content\n          const proxyData = await fetchProxySRT(videoId, lang);\n          console.log('[Sidebar] Proxy fetch completed successfully');\n          \n          // If we got here, we successfully fetched the proxy data\n          // Process it and display it\n          if (proxyData && elements.transcript) {\n            const parsedContent = parseSRTContent(proxyData, format);\n            if (elements.transcript) {\n              elements.transcript.innerHTML = \n                format === 'text' \n                  ? `<div class=\"transcript-text-content\">${parsedContent.trim()}</div>` \n                  : parsedContent;\n            }\n            \n            // Mark this as a proxy source for the summary generation\n            // Note: This only updates the local storeState object for this function\n            // It does not update the Redux store\n            storeState.isProxySource = true;\n            \n            // Get the SRT provider URL and construct the full proxy URL\n            const getSrtProviderUrl = async () => {\n              const srtProvider = await Config.getSrtProvider();\n              // Remove trailing slash from srtProvider if present to prevent double slashes\n              const baseUrl = srtProvider.endsWith('/') ? srtProvider.slice(0, -1) : srtProvider;\n              // Construct the full proxy URL with \"default\" as the language code\n              return `${baseUrl}/srt/${storeState.videoId}/default/${storeState.videoId}.srt`;\n            };\n            \n            // Set the full proxy URL\n            storeState.proxy = await getSrtProviderUrl();\n            console.log('[Sidebar] Set proxy URL for summary generation:', storeState.proxy);\n            \n            // Set content for summary generation\n            content = proxyData;\n            \n            // Generate summary for proxy content only if not skipping summary generation\n            if (!skipSummaryGeneration) {\n              try {\n                console.log('[Sidebar] Generating summary for proxy SRT content:', {\n                  videoId: storeState.videoId,\n                  title: storeState.title,\n                  preferredLanguage: storeState.preferredLanguage\n                });\n                \n                const targetLang = storeState.preferredLanguage;\n                console.log('[Sidebar] Calling autoSummarize with language:', targetLang);\n                \n                await autoSummarize({\n                  videoId: storeState.videoId,\n                  title: storeState.title,\n                  isProxySource: true,\n                  preferredLanguage: targetLang,\n                  proxy: storeState.proxy\n                }, content, targetLang);\n                \n                console.log('[Sidebar] Summary generation completed for proxy content');\n              } catch (summaryError) {\n                console.error('[Sidebar] Error generating summary for proxy content:', summaryError);\n                // Don't throw here, we still want to display the transcript\n              }\n            } else {\n              console.log('[Sidebar] Skipping summary generation for proxy content (format change)');\n            }\n            \n            // Return early to prevent trying to fetch native captions\n            return;\n          } else {\n            throw new Error('Failed to fetch or display proxy SRT content');\n          }\n        } catch (fetchError) {\n          console.error('[Sidebar] Error in fetchProxySRT:', fetchError.message);\n          \n          // Get the current SRT provider URL\n          const srtProvider = await Config.getSrtProvider();\n          \n          // Check if we have permission for the SRT provider\n          const hasPermission = await new Promise(resolve => {\n            chrome.permissions.contains({ origins: [`${srtProvider}/*`] }, resolve);\n          });\n          \n          if (!hasPermission) {\n            console.log('No permission for SRT provider. Permission should have been requested during configuration.');\n            if (elements.transcript) {\n              elements.transcript.innerHTML = `\n                <div style=\"\n                  text-align: center; \n                  padding: 20px; \n                  color: #aaa; \n                  display: flex; \n                  flex-direction: column; \n                  align-items: center;\n                \">\n                  <p style=\"margin-bottom: 20px;\">No permission for subtitle access</p>\n                  <p>Please reconfigure the SRT provider in the extension settings.</p>\n                </div>\n              `;\n            }\n            return;\n          } else {\n            // Permission exists but fetch still failed (e.g., 404 error)\n            if (elements.transcript) {\n              elements.transcript.innerHTML = `\n                <div style=\"\n                  text-align: center; \n                  padding: 20px; \n                  color: #aaa; \n                  display: flex; \n                  flex-direction: column; \n                  align-items: center;\n                \">\n                  <p style=\"margin-bottom: 20px;\">No subtitles available</p>\n                  <p>No native CC transcript from the video and the SRT provider returned a ${fetchError.message}.</p>\n                </div>\n              `;\n              elements.transcript.classList.add('error');\n              toggleConvertButtons(false);\n              \n              // Hide the summary container to avoid showing previous video's summary\n              const summaryContainer = document.querySelector('.summary-container');\n              if (summaryContainer) {\n                summaryContainer.classList.remove('visible');\n              }\n            }\n            return;\n          }\n        }\n      } catch (error) {\n        console.error('[Sidebar] Error in proxy SRT handling:', error);\n        // If we have no native captions, display an error message\n        if (storeState.hasCaptions === false) {\n          if (elements.transcript) {\n            elements.transcript.innerHTML = `\n              <div style=\"\n                text-align: center; \n                padding: 20px; \n                color: #aaa; \n                display: flex; \n                flex-direction: column; \n                align-items: center;\n              \">\n                <p style=\"margin-bottom: 20px;\">No subtitles available</p>\n                <p>No native CC transcript from the video and no proxy SRT available.</p>\n              </div>\n            `;\n            elements.transcript.classList.add('error');\n            toggleConvertButtons(false);\n            \n            // Hide the summary container to avoid showing previous video's summary\n            const summaryContainer = document.querySelector('.summary-container');\n            if (summaryContainer) {\n              summaryContainer.classList.remove('visible');\n            }\n            \n            return;\n          }\n        }\n        // Otherwise, continue with normal flow to try native captions as fallback\n      }\n    }\n\n    // If we get here, try the normal transcript fetching flow\n    if (!transcriptFetcher) {\n      console.error('[Sidebar] TranscriptFetcher is not initialized');\n      throw new Error('Failed to load transcript. Please try refreshing the page.');\n    }\n\n    // Log detailed information about the transcript fetcher state\n    console.log('[Sidebar] Using transcript fetcher:', {\n      hasVideoId: !!transcriptFetcher.videoId,\n      hasPlayerData: !!transcriptFetcher.playerData,\n      preferredLanguage: transcriptFetcher.preferredLanguage,\n      hasCache: transcriptFetcher.cache?.size > 0,\n      hasTranscriptUrl: !!transcriptFetcher.transcriptUrl,\n      hasTranscriptArg: !!transcriptFetcher.transcriptArg,\n      hasTranscriptXML: !!transcriptFetcher.transcriptXML\n    });\n\n    const endpoint = `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.TRANSCRIPT}`;\n    \n    try {\n      // First get the transcript URL and extract the arg\n      console.log('[Sidebar] Attempting to fetch transcript for video:', storeState.videoId);\n      await transcriptFetcher.fetchTranscript(storeState.videoId);\n      const transcriptArg = transcriptFetcher.getTranscriptArg();\n      \n      if (!transcriptArg) {\n        console.error('[Sidebar] Failed to get transcript arg');\n        throw new Error('Failed to get transcript information. Please try refreshing the page.');\n      }\n\n      // Store the arg in the state for later use\n      storeState.transcriptArg = transcriptArg;\n      \n      console.log('[Sidebar] Making transcript request with arg:', {\n        arg: transcriptArg ? transcriptArg.substring(0, 20) + '...' : 'undefined',\n        format,\n        lang\n      });\n\n      // Make the transcript request\n      const response = await mockFetch(endpoint, {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          arg: transcriptArg,\n          format,\n          lang, // Include language in request\n        }),\n      });\n\n      if (!response.ok) {\n        let errorMessage;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.error;\n        } catch (e) {\n          // If we can't parse the error JSON, create a user-friendly message based on status\n          if (response.status === 429) {\n            errorMessage = 'Too many requests. Please wait a moment and try again.';\n          } else {\n            errorMessage = `Failed to fetch transcript (Status ${response.status})`;\n          }\n        }\n        console.error('[Sidebar] Fetch error:', {\n          status: response.status,\n          message: errorMessage\n        });\n        throw new Error(errorMessage);\n      }\n\n      content = await response.text();\n      if (!elements.transcript) {\n        console.error('[Sidebar] Transcript element not found');\n        throw new Error('Transcript element not found');\n      }\n\n      // Format-specific processing\n      if (format === 'text') {\n        // Only normalize newlines for TXT format\n        content = normalizeNewlines(content);\n      } else if (format === 'srt' || format === 'json') {\n        // Preserve original formatting for SRT and JSON\n        content = content.trim();\n      }\n      \n      // Store the transcript and show convert buttons\n      elements.transcript.textContent = content;\n      toggleConvertButtons(true);\n\n      // Then try to generate summary - if it fails, transcript will remain visible\n      if (!skipSummaryGeneration) {\n        try {\n          console.log('[Sidebar] Summary request details:', {\n            videoId: storeState.videoId,\n            title: storeState.title,\n            preferredLanguage: storeState.preferredLanguage,\n            state: storeState\n          });\n\n          const targetLang = storeState.preferredLanguage;\n          console.log('[Sidebar] Calling autoSummarize with language:', targetLang);\n          await autoSummarize({\n            videoId: storeState.videoId,\n            title: storeState.title,\n            transcriptArg,\n            preferredLanguage: targetLang, // Add language to appState\n          }, content, targetLang);\n          \n          console.log('[Sidebar] Summary request details:', {\n            videoId: storeState.videoId,\n            title: storeState.title,\n            preferredLanguage: storeState.preferredLanguage,\n            state: storeState\n          });\n        } catch (error) {\n          console.error('[Sidebar] Error generating summary:', error);\n          return;\n        }\n      }\n    } catch (error) {\n      console.error('[Sidebar] Error updating transcript display:', error);\n      \n      // Only show error message if we failed to get the initial transcript\n      if (!elements.transcript?.textContent || elements.transcript.textContent === 'Loading transcript...') {\n        // Determine the appropriate error message based on the situation\n        let errorMessage = 'Failed to load transcript. Please try refreshing the page.';\n        \n        // Check if we have no native captions\n        if (storeState.hasCaptions === false) {\n          // Check if an SRT provider is defined\n          Config.getSrtProvider().then(srtProvider => {\n            if (!srtProvider || srtProvider === 'undefined') {\n              // No native CC and no SRT provider defined\n              elements.transcript.textContent = 'No native CC transcript.';\n            } else {\n              // No native CC and SRT provider defined but doesn't return anything\n              elements.transcript.textContent = 'No native CC transcript from the video and the SRT provider.';\n            }\n            elements.transcript.classList.add('error');\n            toggleConvertButtons(false);\n            \n            // Hide the summary container to avoid showing previous video's summary\n            const summaryContainer = document.querySelector('.summary-container');\n            if (summaryContainer) {\n              summaryContainer.classList.remove('visible');\n            }\n          });\n        } else {\n          // Default error message for other cases\n          elements.transcript.textContent = errorMessage;\n          elements.transcript.classList.add('error');\n          toggleConvertButtons(false);\n        }\n      }\n      \n      throw error;\n    }\n  } catch (error) {\n    console.error('[Sidebar] Error updating transcript display:', error);\n    \n    // Only show error message if we failed to get the initial transcript\n    if (!elements.transcript?.textContent || elements.transcript.textContent === 'Loading transcript...') {\n      // Determine the appropriate error message based on the situation\n      let errorMessage = 'Failed to load transcript. Please try refreshing the page.';\n      \n      // Check if we have no native captions\n      if (storeState.hasCaptions === false) {\n        // Check if an SRT provider is defined\n        Config.getSrtProvider().then(srtProvider => {\n          if (!srtProvider || srtProvider === 'undefined') {\n            // No native CC and no SRT provider defined\n            elements.transcript.textContent = 'No native CC transcript.';\n          } else {\n            // No native CC and SRT provider defined but doesn't return anything\n            elements.transcript.textContent = 'No native CC transcript from the video and the SRT provider.';\n          }\n          elements.transcript.classList.add('error');\n          toggleConvertButtons(false);\n          \n          // Hide the summary container to avoid showing previous video's summary\n          const summaryContainer = document.querySelector('.summary-container');\n          if (summaryContainer) {\n            summaryContainer.classList.remove('visible');\n          }\n        });\n      } else {\n        // Default error message for other cases\n        elements.transcript.textContent = errorMessage;\n        elements.transcript.classList.add('error');\n        toggleConvertButtons(false);\n      }\n    }\n    \n    throw error;\n  }\n}\n","// Show alert\nexport function showAlert(message, duration = 5000) {\n  const alertContainer = document.querySelector('.alert-container');\n  if (!alertContainer) {\n    console.error('[Sidebar] Alert container not found');\n    return;\n  }\n\n  // Remove existing alerts with the same message to prevent duplicates\n  const existingAlerts = alertContainer.querySelectorAll('.alert');\n  existingAlerts.forEach(existing => {\n    if (existing.querySelector('.alert-content')?.textContent === message) {\n      removeAlert(existing);\n    }\n  });\n\n  // Create alert element\n  const alert = document.createElement('div');\n  alert.className = 'alert';\n  \n  const content = document.createElement('div');\n  content.className = 'alert-content';\n  content.textContent = message;\n  \n  const closeButton = document.createElement('button');\n  closeButton.className = 'alert-close';\n  closeButton.innerHTML = '';\n  closeButton.onclick = () => removeAlert(alert);\n  \n  alert.appendChild(content);\n  alert.appendChild(closeButton);\n  \n  // Add to container\n  alertContainer.appendChild(alert);\n  alertContainer.classList.add('visible');\n  \n  // Ensure the alert is visible by scrolling it into view if needed\n  setTimeout(() => {\n    alert.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n  }, 100);\n  \n  // Auto remove after duration\n  if (duration > 0) {\n    setTimeout(() => removeAlert(alert), duration);\n  }\n  \n  return alert;\n}\n\n// Remove alert\nexport function removeAlert(alert) {\n  if (!alert || !alert.parentElement) return;\n  \n  // Start fade out\n  alert.style.opacity = '0';\n  \n  // Remove after animation\n  setTimeout(() => {\n    alert.remove();\n    \n    // Hide container if no more alerts\n    const alertContainer = document.querySelector('.alert-container');\n    if (alertContainer && !alertContainer.children.length) {\n      alertContainer.classList.remove('visible');\n    }\n  }, 300);\n}\n\n// Handle error display\nexport function handleError(error) {\n  console.error('[Sidebar] Error:', error);\n  const message = error.message || 'An unexpected error occurred. Please try refreshing the page.';\n  console.log('[Sidebar] Showing error alert:', message);\n  showAlert(message);\n}\n","/**\n * Configuration UI manager for the extension\n * @module configManager\n */\n\nimport { Config } from '../config.js';\n\n/**\n * Initialize the configuration UI\n * @param {Object} elements - DOM elements\n */\nexport async function initializeConfigUI(elements) {\n  // Check if SRT provider is already in config\n  const srtProvider = await getSrtProvider();\n  console.log('[ConfigManager] Initialized with SRT provider:', srtProvider);\n  \n  // Set the SRT provider input field value if it exists\n  if (elements.srtProviderInput && srtProvider) {\n    console.log('[ConfigManager] Setting SRT provider input value to:', srtProvider);\n    elements.srtProviderInput.value = srtProvider;\n  }\n}\n\n/**\n * Toggle the configuration menu visibility\n * @param {Object} elements - DOM elements\n * @param {boolean} [show] - Whether to show or hide the menu. If not provided, toggles current state.\n */\nexport function toggleConfigMenu(elements, show) {\n  const configMenu = elements.configMenu;\n  \n  if (!configMenu) {\n    console.error('[ConfigManager] Config menu element not found');\n    return;\n  }\n  \n  // Determine whether to show or hide based on current state if show parameter is not provided\n  const shouldShow = show !== undefined ? show : !configMenu.classList.contains('visible');\n  \n  // Close other menus if opening this one\n  if (shouldShow && elements.fontSizeMenu?.classList.contains('visible')) {\n    elements.fontSizeMenu.classList.remove('visible');\n  }\n  \n  if (shouldShow) {\n    configMenu.classList.add('visible');\n    console.log('[ConfigManager] Config menu opened');\n    \n    // Pre-fill the input with current value\n    getSrtProvider().then(url => {\n      console.log('[ConfigManager] Retrieved current SRT provider for menu:', url);\n      if (elements.srtProviderInput) {\n        elements.srtProviderInput.value = url || '';\n        console.log('[ConfigManager] Input field pre-filled with:', url || 'empty string');\n      } else {\n        console.error('[ConfigManager] SRT provider input element not found in elements object');\n        // Try to find it directly in the DOM\n        const input = configMenu.querySelector('#srtProviderInput');\n        if (input) {\n          input.value = url || '';\n          console.log('[ConfigManager] Input field found in DOM and pre-filled with:', url || 'empty string');\n        } else {\n          console.error('[ConfigManager] SRT provider input element not found in DOM either');\n        }\n      }\n    }).catch(error => {\n      console.error('[ConfigManager] Error getting SRT provider:', error);\n    });\n    \n    // Add click event listener to document to close menu when clicking outside\n    document.addEventListener('click', closeConfigMenuOnClickOutside);\n  } else {\n    configMenu.classList.remove('visible');\n    document.removeEventListener('click', closeConfigMenuOnClickOutside);\n    console.log('[ConfigManager] Config menu closed');\n  }\n}\n\n/**\n * Close the config menu when clicking outside\n * @param {Event} event - Click event\n */\nfunction closeConfigMenuOnClickOutside(event) {\n  const configMenu = document.querySelector('#configMenu');\n  const configButton = document.querySelector('#configButton');\n  \n  if (configMenu && !configMenu.contains(event.target) && \n      configButton && !configButton.contains(event.target)) {\n    configMenu.classList.remove('visible');\n    document.removeEventListener('click', closeConfigMenuOnClickOutside);\n    console.log('[ConfigManager] Config menu closed by clicking outside');\n  }\n}\n\n/**\n * Performs a dummy request to the SRT provider URL to trigger Chrome's permission dialog\n * @param {string} url - The SRT provider URL\n * @returns {Promise<boolean>} - Whether the request was successful\n */\nasync function performDummyRequest(url) {\n  try {\n    console.log('[ConfigManager] Requesting permission for SRT provider:', url);\n    \n    // Ensure URL is properly formatted\n    let validUrl = url;\n    if (validUrl && !validUrl.startsWith('http://') && !validUrl.startsWith('https://')) {\n      validUrl = 'https://' + validUrl;\n      console.log('[ConfigManager] Formatted URL with https://', validUrl);\n    }\n    \n    // Remove trailing path components and query parameters to get the root URL\n    const rootUrl = new URL(validUrl).origin;\n    console.log('[ConfigManager] Using root URL for permission request:', rootUrl);\n    \n    // Request permission directly using chrome.permissions API\n    return new Promise((resolve) => {\n      chrome.permissions.request({\n        origins: [`${rootUrl}/*`]\n      }, granted => {\n        if (chrome.runtime.lastError) {\n          console.error('[ConfigManager] Chrome runtime error during permission request:', chrome.runtime.lastError);\n          resolve(false);\n          return;\n        }\n        \n        if (granted) {\n          console.log('[ConfigManager] Permission granted for SRT provider');\n          resolve(true);\n        } else {\n          console.warn('[ConfigManager] Permission denied for SRT provider');\n          resolve(false);\n        }\n      });\n    });\n  } catch (error) {\n    console.error('[ConfigManager] Error requesting permission:', error);\n    return false;\n  }\n}\n\n/**\n * Save the SRT provider URL\n * @param {string} url - The SRT provider URL\n * @returns {Promise<string>} - The saved URL\n */\nexport async function saveSrtProvider(url) {\n  try {\n    console.log('[ConfigManager] Attempting to save SRT provider URL:', url);\n    \n    // Ensure URL is properly formatted\n    let validUrl = url;\n    if (validUrl && !validUrl.startsWith('http://') && !validUrl.startsWith('https://')) {\n      validUrl = 'https://' + validUrl;\n      console.log('[ConfigManager] Formatted URL with https://', validUrl);\n    }\n    \n    // Perform a dummy request to trigger Chrome's permission dialog\n    // This should be the first and only time the user needs to grant permission\n    await performDummyRequest(validUrl);\n    \n    // Save the URL using the Config class\n    await Config.setSrtProvider(validUrl);\n    \n    // Verify the save was successful by reading it back\n    const verifiedUrl = await Config.getSrtProvider();\n    console.log('[ConfigManager] Verified saved URL:', verifiedUrl);\n    \n    if (verifiedUrl !== validUrl) {\n      console.error('[ConfigManager] URL verification failed! Saved:', validUrl, 'Retrieved:', verifiedUrl);\n    }\n    \n    return validUrl;\n  } catch (error) {\n    console.error('[ConfigManager] Error saving SRT provider:', error);\n    return null;\n  }\n}\n\n/**\n * Get the current SRT provider URL\n * @returns {Promise<string>} - The current SRT provider URL\n */\nexport async function getSrtProvider() {\n  try {\n    // Use the Config class method to get the SRT provider\n    const provider = await Config.getSrtProvider();\n    console.log('[ConfigManager] Retrieved SRT provider:', provider);\n    \n    // If provider is undefined or null, return an empty string for better UI handling\n    if (provider === undefined || provider === null) {\n      console.log('[ConfigManager] No SRT provider found, returning empty string');\n      return '';\n    }\n    \n    return provider;\n  } catch (error) {\n    console.error('[ConfigManager] Error getting SRT provider:', error);\n    return '';\n  }\n}\n","import { Config } from '../config.js';\n\n// Initialize font size menu\nexport function initializeFontSizeMenu(elements, currentSize) {\n  if (!elements?.fontSizeMenu) return;\n\n  // Clear existing options\n  elements.fontSizeMenu.innerHTML = '';\n\n  // Create options for specific sizes\n  const sizes = [12, 14, 16, 18, 20];\n  sizes.forEach((size) => {\n    const option = document.createElement('div');\n    option.className = `font-size-option${size === currentSize ? ' selected' : ''}`;\n    option.textContent = `${size}px`;\n    option.addEventListener('click', (e) => {\n      e.stopPropagation();\n      handleFontSizeChange(elements, size);\n      toggleFontSizeMenu(elements, false);\n    });\n    elements.fontSizeMenu.appendChild(option);\n  });\n}\n\n// Handle font size change\nexport async function handleFontSizeChange(elements, newSize) {\n  if (!elements?.summary) return;\n  \n  // Update font size through Config\n  const validSize = await Config.setFontSize(newSize);\n  elements.summary.style.fontSize = `${validSize}px`;\n  \n  // Update selected state in menu\n  const options = elements.fontSizeMenu?.querySelectorAll('.font-size-option');\n  options?.forEach((option) => {\n    option.classList.toggle('selected', option.textContent === `${validSize}px`);\n  });\n}\n\n// Toggle font size menu\nexport function toggleFontSizeMenu(elements, show) {\n  if (!elements?.fontSizeMenu) return;\n  elements.fontSizeMenu.classList.toggle('visible', show);\n  // If showing menu, add click outside listener\n  if (show) {\n    setTimeout(() => {\n      document.addEventListener('click', (e) => handleClickOutside(e, elements));\n    }, 0);\n  } else {\n    document.removeEventListener('click', (e) => handleClickOutside(e, elements));\n  }\n}\n\n// Handle click outside font size menu\nfunction handleClickOutside(e, elements) {\n  if (!elements?.fontSizeBtn?.contains(e.target)) {\n    toggleFontSizeMenu(elements, false);\n  }\n}\n\n// Initialize font size from config\nexport async function initializeFontSize(elements) {\n  if (!elements.summary || !elements.fontSizeMenu) return;\n  \n  try {\n    const savedFontSize = await Config.getFontSize();\n    elements.summary.style.fontSize = `${savedFontSize}px`;\n    initializeFontSizeMenu(elements, savedFontSize);\n  } catch (error) {\n    console.error('[Sidebar] Error loading font size preference:', error);\n    const defaultSize = 14;\n    elements.summary.style.fontSize = `${defaultSize}px`;\n    initializeFontSizeMenu(elements, defaultSize);\n  }\n}\n","import { Config } from '../config.js';\n\n// Initialize theme\nexport async function initializeTheme(elements) {\n  const { themeToggle } = elements;\n  if (!themeToggle) {\n    console.error('[Sidebar] Theme toggle not found');\n    return;\n  }\n\n  // Load saved theme and apply immediately\n  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n  const config = await Config.get();\n  const savedTheme = config.preferences?.theme?.value || (prefersDark ? 'dark' : 'light');\n\n  // Save initial theme if not set\n  if (!config.preferences?.theme?.value) {\n    config.preferences.theme = {\n      value: savedTheme,\n      lastUpdated: Date.now()\n    };\n    await Config.save(config);\n  }\n\n  // Apply theme immediately\n  document.documentElement.setAttribute('data-theme', savedTheme);\n  await updateThemeIcons(elements, savedTheme === 'dark');\n\n  // Listen for system theme changes\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', async (e) => {\n    const config = await Config.get();\n    // Only update if no user preference is saved\n    if (!config.preferences?.theme?.value) {\n      const newTheme = e.matches ? 'dark' : 'light';\n      config.preferences.theme = {\n        value: newTheme,\n        lastUpdated: Date.now()\n      };\n      await Config.save(config);\n      document.documentElement.setAttribute('data-theme', newTheme);\n      await updateThemeIcons(elements, newTheme === 'dark');\n    }\n  });\n}\n\n// Update theme icons\nexport async function updateThemeIcons(elements, isDark) {\n  const { themeToggle } = elements;\n  if (!themeToggle) {\n    console.error('[Sidebar] Theme toggle not found');\n    return;\n  }\n\n  const sunIcon = themeToggle.querySelector('.sun-icon');\n  const moonIcon = themeToggle.querySelector('.moon-icon');\n  if (!sunIcon || !moonIcon) {\n    console.error('[Sidebar] Theme icons not found:', { sunIcon: !!sunIcon, moonIcon: !!moonIcon });\n    return;\n  }\n\n  sunIcon.style.display = isDark ? 'none' : 'block';\n  moonIcon.style.display = isDark ? 'block' : 'none';\n}\n\n// Handle theme toggle click\nexport async function handleThemeToggle(elements) {\n  const config = await Config.get();\n  const currentTheme = document.documentElement.getAttribute('data-theme');\n  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';\n\n  // Update config with new theme\n  config.preferences.theme = {\n    value: newTheme,\n    lastUpdated: Date.now()\n  };\n  await Config.save(config);\n\n  document.documentElement.setAttribute('data-theme', newTheme);\n  await updateThemeIcons(elements, newTheme === 'dark');\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = assignIn;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/**\r\n * Simple middleware intercepts actions and replaces with\r\n * another by calling an alias function with the original action\r\n * @type {object} aliases an object that maps action types (keys) to alias functions (values) (e.g. { SOME_ACTION: newActionAliasFunc })\r\n */\nvar _default = function _default(aliases) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        var alias = aliases[action.type];\n\n        if (alias) {\n          return next(alias(action));\n        }\n\n        return next(action);\n      };\n    };\n  };\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DEFAULT_PORT_NAME = exports.PATCH_STATE_TYPE = exports.STATE_TYPE = exports.DISPATCH_TYPE = void 0;\n// Message type used for dispatch events\n// from the Proxy Stores to background\nvar DISPATCH_TYPE = 'chromex.dispatch'; // Message type for state update events from\n// background to Proxy Stores\n\nexports.DISPATCH_TYPE = DISPATCH_TYPE;\nvar STATE_TYPE = 'chromex.state'; // Message type for state patch events from\n// background to Proxy Stores\n\nexports.STATE_TYPE = STATE_TYPE;\nvar PATCH_STATE_TYPE = 'chromex.patch_state'; // The default name for the port communication via\n// react-chrome-redux\n\nexports.PATCH_STATE_TYPE = PATCH_STATE_TYPE;\nvar DEFAULT_PORT_NAME = \"chromex.port_name\";\nexports.DEFAULT_PORT_NAME = DEFAULT_PORT_NAME;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Store\", {\n  enumerable: true,\n  get: function get() {\n    return _Store.default;\n  }\n});\nObject.defineProperty(exports, \"applyMiddleware\", {\n  enumerable: true,\n  get: function get() {\n    return _applyMiddleware.default;\n  }\n});\nObject.defineProperty(exports, \"wrapStore\", {\n  enumerable: true,\n  get: function get() {\n    return _wrapStore.default;\n  }\n});\nObject.defineProperty(exports, \"alias\", {\n  enumerable: true,\n  get: function get() {\n    return _alias.default;\n  }\n});\n\nvar _Store = _interopRequireDefault(require(\"./store/Store\"));\n\nvar _applyMiddleware = _interopRequireDefault(require(\"./store/applyMiddleware\"));\n\nvar _wrapStore = _interopRequireDefault(require(\"./wrap-store/wrapStore\"));\n\nvar _alias = _interopRequireDefault(require(\"./alias/alias\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withSerializer = exports.withDeserializer = exports.noop = void 0;\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar noop = function noop(payload) {\n  return payload;\n};\n\nexports.noop = noop;\n\nvar transformPayload = function transformPayload(message) {\n  var transformer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  return _objectSpread({}, message, message.payload ? {\n    payload: transformer(message.payload)\n  } : {});\n};\n\nvar deserializeListener = function deserializeListener(listener) {\n  var deserializer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  var shouldDeserialize = arguments.length > 2 ? arguments[2] : undefined;\n\n  // If a shouldDeserialize function is passed, return a function that uses it\n  // to check if any given message payload should be deserialized\n  if (shouldDeserialize) {\n    return function (message) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (shouldDeserialize.apply(void 0, [message].concat(args))) {\n        return listener.apply(void 0, [transformPayload(message, deserializer)].concat(args));\n      }\n\n      return listener.apply(void 0, [message].concat(args));\n    };\n  } // Otherwise, return a function that tries to deserialize on every message\n\n\n  return function (message) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return listener.apply(void 0, [transformPayload(message, deserializer)].concat(args));\n  };\n};\n/**\r\n * A function returned from withDeserializer that, when called, wraps addListenerFn with the\r\n * deserializer passed to withDeserializer.\r\n * @name AddListenerDeserializer\r\n * @function\r\n * @param {Function} addListenerFn The add listener function to wrap.\r\n * @returns {DeserializedAddListener}\r\n */\n\n/**\r\n * A wrapped add listener function that registers the given listener.\r\n * @name DeserializedAddListener\r\n * @function\r\n * @param {Function} listener The listener function to register. It should expect the (optionally)\r\n * deserialized message as its first argument.\r\n * @param {Function} [shouldDeserialize] A function that takes the arguments passed to the listener\r\n * and returns whether the message payload should be deserialized. Not all messages (notably, messages\r\n * this listener doesn't care about) should be attempted to be deserialized.\r\n */\n\n/**\r\n * Given a deserializer, returns an AddListenerDeserializer function that that takes an add listener\r\n * function and returns a DeserializedAddListener that automatically deserializes message payloads.\r\n * Each message listener is expected to take the message as its first argument.\r\n * @param {Function} deserializer A function that deserializes a message payload.\r\n * @returns {AddListenerDeserializer}\r\n * Example Usage:\r\n *   const withJsonDeserializer = withDeserializer(payload => JSON.parse(payload));\r\n *   const deserializedChromeListener = withJsonDeserializer(chrome.runtime.onMessage.addListener);\r\n *   const shouldDeserialize = (message) => message.type === 'DESERIALIZE_ME';\r\n *   deserializedChromeListener(message => console.log(\"Payload:\", message.payload), shouldDeserialize);\r\n *   chrome.runtime.sendMessage(\"{'type:'DESERIALIZE_ME','payload':{'prop':4}}\");\r\n *   //Payload: { prop: 4 };\r\n *   chrome.runtime.sendMessage(\"{'payload':{'prop':4}}\");\r\n *   //Payload: \"{'prop':4}\";\r\n */\n\n\nvar withDeserializer = function withDeserializer() {\n  var deserializer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  return function (addListenerFn) {\n    return function (listener, shouldDeserialize) {\n      return addListenerFn(deserializeListener(listener, deserializer, shouldDeserialize));\n    };\n  };\n};\n/**\r\n * Given a serializer, returns a function that takes a message sending\r\n * function as its sole argument and returns a wrapped message sender that\r\n * automaticaly serializes message payloads. The message sender\r\n * is expected to take the message as its first argument, unless messageArgIndex\r\n * is nonzero, in which case it is expected in the position specified by messageArgIndex.\r\n * @param {Function} serializer A function that serializes a message payload\r\n * Example Usage:\r\n *   const withJsonSerializer = withSerializer(payload => JSON.stringify(payload))\r\n *   const serializedChromeSender = withJsonSerializer(chrome.runtime.sendMessage)\r\n *   chrome.runtime.addListener(message => console.log(\"Payload:\", message.payload))\r\n *   serializedChromeSender({ payload: { prop: 4 }})\r\n *   //Payload: \"{'prop':4}\"\r\n */\n\n\nexports.withDeserializer = withDeserializer;\n\nvar withSerializer = function withSerializer() {\n  var serializer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  return function (sendMessageFn) {\n    var messageArgIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      if (args.length <= messageArgIndex) {\n        throw new Error(\"Message in request could not be serialized. \" + \"Expected message in position \".concat(messageArgIndex, \" but only received \").concat(args.length, \" args.\"));\n      }\n\n      args[messageArgIndex] = transformPayload(args[messageArgIndex], serializer);\n      return sendMessageFn.apply(void 0, args);\n    };\n  };\n};\n\nexports.withSerializer = withSerializer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.assignin\"));\n\nvar _constants = require(\"../constants\");\n\nvar _serialization = require(\"../serialization\");\n\nvar _patch = _interopRequireDefault(require(\"../strategies/shallowDiff/patch\"));\n\nvar _util = require(\"../util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar backgroundErrPrefix = '\\nLooks like there is an error in the background page. ' + 'You might want to inspect your background page for more details.\\n';\nvar defaultOpts = {\n  portName: _constants.DEFAULT_PORT_NAME,\n  state: {},\n  extensionId: null,\n  serializer: _serialization.noop,\n  deserializer: _serialization.noop,\n  patchStrategy: _patch.default\n};\n\nvar Store =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * Creates a new Proxy store\r\n   * @param  {object} options An object of form {portName, state, extensionId, serializer, deserializer, diffStrategy}, where `portName` is a required string and defines the name of the port for state transition changes, `state` is the initial state of this store (default `{}`) `extensionId` is the extension id as defined by browserAPI when extension is loaded (default `''`), `serializer` is a function to serialize outgoing message payloads (default is passthrough), `deserializer` is a function to deserialize incoming message payloads (default is passthrough), and patchStrategy is one of the included patching strategies (default is shallow diff) or a custom patching function.\r\n   */\n  function Store() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOpts,\n        _ref$portName = _ref.portName,\n        portName = _ref$portName === void 0 ? defaultOpts.portName : _ref$portName,\n        _ref$state = _ref.state,\n        state = _ref$state === void 0 ? defaultOpts.state : _ref$state,\n        _ref$extensionId = _ref.extensionId,\n        extensionId = _ref$extensionId === void 0 ? defaultOpts.extensionId : _ref$extensionId,\n        _ref$serializer = _ref.serializer,\n        serializer = _ref$serializer === void 0 ? defaultOpts.serializer : _ref$serializer,\n        _ref$deserializer = _ref.deserializer,\n        deserializer = _ref$deserializer === void 0 ? defaultOpts.deserializer : _ref$deserializer,\n        _ref$patchStrategy = _ref.patchStrategy,\n        patchStrategy = _ref$patchStrategy === void 0 ? defaultOpts.patchStrategy : _ref$patchStrategy;\n\n    _classCallCheck(this, Store);\n\n    if (!portName) {\n      throw new Error('portName is required in options');\n    }\n\n    if (typeof serializer !== 'function') {\n      throw new Error('serializer must be a function');\n    }\n\n    if (typeof deserializer !== 'function') {\n      throw new Error('deserializer must be a function');\n    }\n\n    if (typeof patchStrategy !== 'function') {\n      throw new Error('patchStrategy must be one of the included patching strategies or a custom patching function');\n    }\n\n    this.portName = portName;\n    this.readyResolved = false;\n    this.readyPromise = new Promise(function (resolve) {\n      return _this.readyResolve = resolve;\n    });\n    this.browserAPI = (0, _util.getBrowserAPI)();\n    this.extensionId = extensionId; // keep the extensionId as an instance variable\n\n    this.port = this.browserAPI.runtime.connect(this.extensionId, {\n      name: portName\n    });\n    this.safetyHandler = this.safetyHandler.bind(this);\n\n    if (this.browserAPI.runtime.onMessage) {\n      this.safetyMessage = this.browserAPI.runtime.onMessage.addListener(this.safetyHandler);\n    }\n\n    this.serializedPortListener = (0, _serialization.withDeserializer)(deserializer)(function () {\n      var _this$port$onMessage;\n\n      return (_this$port$onMessage = _this.port.onMessage).addListener.apply(_this$port$onMessage, arguments);\n    });\n    this.serializedMessageSender = (0, _serialization.withSerializer)(serializer)(function () {\n      var _this$browserAPI$runt;\n\n      return (_this$browserAPI$runt = _this.browserAPI.runtime).sendMessage.apply(_this$browserAPI$runt, arguments);\n    }, 1);\n    this.listeners = [];\n    this.state = state;\n    this.patchStrategy = patchStrategy; // Don't use shouldDeserialize here, since no one else should be using this port\n\n    this.serializedPortListener(function (message) {\n      switch (message.type) {\n        case _constants.STATE_TYPE:\n          _this.replaceState(message.payload);\n\n          if (!_this.readyResolved) {\n            _this.readyResolved = true;\n\n            _this.readyResolve();\n          }\n\n          break;\n\n        case _constants.PATCH_STATE_TYPE:\n          _this.patchState(message.payload);\n\n          break;\n\n        default: // do nothing\n\n      }\n    });\n    this.dispatch = this.dispatch.bind(this); // add this context to dispatch\n  }\n  /**\r\n  * Returns a promise that resolves when the store is ready. Optionally a callback may be passed in instead.\r\n  * @param [function] callback An optional callback that may be passed in and will fire when the store is ready.\r\n  * @return {object} promise A promise that resolves when the store has established a connection with the background page.\r\n  */\n\n\n  _createClass(Store, [{\n    key: \"ready\",\n    value: function ready() {\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (cb !== null) {\n        return this.readyPromise.then(cb);\n      }\n\n      return this.readyPromise;\n    }\n    /**\r\n     * Subscribes a listener function for all state changes\r\n     * @param  {function} listener A listener function to be called when store state changes\r\n     * @return {function}          An unsubscribe function which can be called to remove the listener from state updates\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      var _this2 = this;\n\n      this.listeners.push(listener);\n      return function () {\n        _this2.listeners = _this2.listeners.filter(function (l) {\n          return l !== listener;\n        });\n      };\n    }\n    /**\r\n     * Replaces the state for only the keys in the updated state. Notifies all listeners of state change.\r\n     * @param {object} state the new (partial) redux state\r\n     */\n\n  }, {\n    key: \"patchState\",\n    value: function patchState(difference) {\n      this.state = this.patchStrategy(this.state, difference);\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n    /**\r\n     * Replace the current state with a new state. Notifies all listeners of state change.\r\n     * @param  {object} state The new state for the store\r\n     */\n\n  }, {\n    key: \"replaceState\",\n    value: function replaceState(state) {\n      this.state = state;\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n    /**\r\n     * Get the current state of the store\r\n     * @return {object} the current store state\r\n     */\n\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n    /**\r\n     * Stub function to stay consistent with Redux Store API. No-op.\r\n     */\n\n  }, {\n    key: \"replaceReducer\",\n    value: function replaceReducer() {\n      return;\n    }\n    /**\r\n     * Dispatch an action to the background using messaging passing\r\n     * @param  {object} data The action data to dispatch\r\n     * @return {Promise}     Promise that will resolve/reject based on the action response from the background\r\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(data) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this3.serializedMessageSender(_this3.extensionId, {\n          type: _constants.DISPATCH_TYPE,\n          portName: _this3.portName,\n          payload: data\n        }, null, function (resp) {\n          if (!resp) {\n            var _error = _this3.browserAPI.runtime.lastError;\n            var bgErr = new Error(\"\".concat(backgroundErrPrefix).concat(_error));\n            reject((0, _lodash.default)(bgErr, _error));\n            return;\n          }\n\n          var error = resp.error,\n              value = resp.value;\n\n          if (error) {\n            var _bgErr = new Error(\"\".concat(backgroundErrPrefix).concat(error));\n\n            reject((0, _lodash.default)(_bgErr, error));\n          } else {\n            resolve(value && value.payload);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"safetyHandler\",\n    value: function safetyHandler(message) {\n      if (message.action === 'storeReady' && message.portName === this.portName) {\n        // Remove Saftey Listener\n        this.browserAPI.runtime.onMessage.removeListener(this.safetyHandler); // Resolve if readyPromise has not been resolved.\n\n        if (!this.readyResolved) {\n          this.readyResolved = true;\n          this.readyResolve();\n        }\n      }\n    }\n  }]);\n\n  return Store;\n}();\n\nvar _default = Store;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = applyMiddleware;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n// Function taken from redux source\n// https://github.com/reactjs/redux/blob/master/src/compose.js\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n} // Based on redux implementation of applyMiddleware to support all standard\n// redux middlewares\n\n\nfunction applyMiddleware(store) {\n  for (var _len2 = arguments.length, middlewares = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    middlewares[_key2 - 1] = arguments[_key2];\n  }\n\n  var _dispatch = function dispatch() {\n    throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n  };\n\n  var middlewareAPI = {\n    getState: store.getState.bind(store),\n    dispatch: function dispatch() {\n      return _dispatch.apply(void 0, arguments);\n    }\n  };\n  middlewares = (middlewares || []).map(function (middleware) {\n    return middleware(middlewareAPI);\n  });\n  _dispatch = compose.apply(void 0, _toConsumableArray(middlewares))(store.dispatch);\n  store.dispatch = _dispatch;\n  return store;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DIFF_STATUS_ARRAY_UPDATED = exports.DIFF_STATUS_KEYS_UPDATED = exports.DIFF_STATUS_REMOVED = exports.DIFF_STATUS_UPDATED = void 0;\n// The `change` value for updated or inserted fields resulting from shallow diff\nvar DIFF_STATUS_UPDATED = 'updated'; // The `change` value for removed fields resulting from shallow diff\n\nexports.DIFF_STATUS_UPDATED = DIFF_STATUS_UPDATED;\nvar DIFF_STATUS_REMOVED = 'removed';\nexports.DIFF_STATUS_REMOVED = DIFF_STATUS_REMOVED;\nvar DIFF_STATUS_KEYS_UPDATED = 'updated_keys';\nexports.DIFF_STATUS_KEYS_UPDATED = DIFF_STATUS_KEYS_UPDATED;\nvar DIFF_STATUS_ARRAY_UPDATED = 'updated_array';\nexports.DIFF_STATUS_ARRAY_UPDATED = DIFF_STATUS_ARRAY_UPDATED;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = shallowDiff;\n\nvar _constants = require(\"../constants\");\n\n/**\r\n * Returns a new Object containing only the fields in `new` that differ from `old`\r\n *\r\n * @param {Object} old\r\n * @param {Object} new\r\n * @return {Array} An array of changes. The changes have a `key`, `value`, and `change`.\r\n *   The change is either `updated`, which is if the value has changed or been added,\r\n *   or `removed`.\r\n */\nfunction shallowDiff(oldObj, newObj) {\n  var difference = [];\n  Object.keys(newObj).forEach(function (key) {\n    if (oldObj[key] !== newObj[key]) {\n      difference.push({\n        key: key,\n        value: newObj[key],\n        change: _constants.DIFF_STATUS_UPDATED\n      });\n    }\n  });\n  Object.keys(oldObj).forEach(function (key) {\n    if (!newObj.hasOwnProperty(key)) {\n      difference.push({\n        key: key,\n        change: _constants.DIFF_STATUS_REMOVED\n      });\n    }\n  });\n  return difference;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _constants = require(\"../constants\");\n\nfunction _default(obj, difference) {\n  var newObj = Object.assign({}, obj);\n  difference.forEach(function (_ref) {\n    var change = _ref.change,\n        key = _ref.key,\n        value = _ref.value;\n\n    switch (change) {\n      case _constants.DIFF_STATUS_UPDATED:\n        newObj[key] = value;\n        break;\n\n      case _constants.DIFF_STATUS_REMOVED:\n        Reflect.deleteProperty(newObj, key);\n        break;\n\n      default: // do nothing\n\n    }\n  });\n  return newObj;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBrowserAPI = getBrowserAPI;\n\n/**\r\n * Looks for a global browser api, first checking the chrome namespace and then\r\n * checking the browser namespace. If no appropriate namespace is present, this\r\n * function will throw an error.\r\n */\nfunction getBrowserAPI() {\n  var api;\n\n  try {\n    // eslint-disable-next-line no-undef\n    api = self.chrome || self.browser || browser;\n  } catch (error) {\n    // eslint-disable-next-line no-undef\n    api = browser;\n  }\n\n  if (!api) {\n    throw new Error(\"Browser API is not present\");\n  }\n\n  return api;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _constants = require(\"../constants\");\n\nvar _serialization = require(\"../serialization\");\n\nvar _util = require(\"../util\");\n\nvar _diff = _interopRequireDefault(require(\"../strategies/shallowDiff/diff\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Responder for promisified results\r\n * @param  {object} dispatchResult The result from `store.dispatch()`\r\n * @param  {function} send         The function used to respond to original message\r\n * @return {undefined}\r\n */\nvar promiseResponder = function promiseResponder(dispatchResult, send) {\n  Promise.resolve(dispatchResult).then(function (res) {\n    send({\n      error: null,\n      value: res\n    });\n  }).catch(function (err) {\n    console.error('error dispatching result:', err);\n    send({\n      error: err.message,\n      value: null\n    });\n  });\n};\n\nvar defaultOpts = {\n  portName: _constants.DEFAULT_PORT_NAME,\n  dispatchResponder: promiseResponder,\n  serializer: _serialization.noop,\n  deserializer: _serialization.noop,\n  diffStrategy: _diff.default\n};\n/**\r\n * Wraps a Redux store so that proxy stores can connect to it.\r\n * @param {Object} store A Redux store\r\n * @param {Object} options An object of form {portName, dispatchResponder, serializer, deserializer}, where `portName` is a required string and defines the name of the port for state transition changes, `dispatchResponder` is a function that takes the result of a store dispatch and optionally implements custom logic for responding to the original dispatch message,`serializer` is a function to serialize outgoing message payloads (default is passthrough), `deserializer` is a function to deserialize incoming message payloads (default is passthrough), and diffStrategy is one of the included diffing strategies (default is shallow diff) or a custom diffing function.\r\n */\n\nvar _default = function _default(store) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultOpts,\n      _ref$portName = _ref.portName,\n      portName = _ref$portName === void 0 ? defaultOpts.portName : _ref$portName,\n      _ref$dispatchResponde = _ref.dispatchResponder,\n      dispatchResponder = _ref$dispatchResponde === void 0 ? defaultOpts.dispatchResponder : _ref$dispatchResponde,\n      _ref$serializer = _ref.serializer,\n      serializer = _ref$serializer === void 0 ? defaultOpts.serializer : _ref$serializer,\n      _ref$deserializer = _ref.deserializer,\n      deserializer = _ref$deserializer === void 0 ? defaultOpts.deserializer : _ref$deserializer,\n      _ref$diffStrategy = _ref.diffStrategy,\n      diffStrategy = _ref$diffStrategy === void 0 ? defaultOpts.diffStrategy : _ref$diffStrategy;\n\n  if (!portName) {\n    throw new Error('portName is required in options');\n  }\n\n  if (typeof serializer !== 'function') {\n    throw new Error('serializer must be a function');\n  }\n\n  if (typeof deserializer !== 'function') {\n    throw new Error('deserializer must be a function');\n  }\n\n  if (typeof diffStrategy !== 'function') {\n    throw new Error('diffStrategy must be one of the included diffing strategies or a custom diff function');\n  }\n\n  var browserAPI = (0, _util.getBrowserAPI)();\n  /**\r\n   * Respond to dispatches from UI components\r\n   */\n\n  var dispatchResponse = function dispatchResponse(request, sender, sendResponse) {\n    if (request.type === _constants.DISPATCH_TYPE && request.portName === portName) {\n      var action = Object.assign({}, request.payload, {\n        _sender: sender\n      });\n      var dispatchResult = null;\n\n      try {\n        dispatchResult = store.dispatch(action);\n      } catch (e) {\n        dispatchResult = Promise.reject(e.message);\n        console.error(e);\n      }\n\n      dispatchResponder(dispatchResult, sendResponse);\n      return true;\n    }\n  };\n  /**\r\n  * Setup for state updates\r\n  */\n\n\n  var connectState = function connectState(port) {\n    if (port.name !== portName) {\n      return;\n    }\n\n    var serializedMessagePoster = (0, _serialization.withSerializer)(serializer)(function () {\n      return port.postMessage.apply(port, arguments);\n    });\n    var prevState = store.getState();\n\n    var patchState = function patchState() {\n      var state = store.getState();\n      var diff = diffStrategy(prevState, state);\n\n      if (diff.length) {\n        prevState = state;\n        serializedMessagePoster({\n          type: _constants.PATCH_STATE_TYPE,\n          payload: diff\n        });\n      }\n    }; // Send patched state down connected port on every redux store state change\n\n\n    var unsubscribe = store.subscribe(patchState); // when the port disconnects, unsubscribe the sendState listener\n\n    port.onDisconnect.addListener(unsubscribe); // Send store's initial state through port\n\n    serializedMessagePoster({\n      type: _constants.STATE_TYPE,\n      payload: prevState\n    });\n  };\n\n  var withPayloadDeserializer = (0, _serialization.withDeserializer)(deserializer);\n\n  var shouldDeserialize = function shouldDeserialize(request) {\n    return request.type === _constants.DISPATCH_TYPE && request.portName === portName;\n  };\n  /**\r\n   * Setup action handler\r\n   */\n\n\n  withPayloadDeserializer(function () {\n    var _browserAPI$runtime$o;\n\n    return (_browserAPI$runtime$o = browserAPI.runtime.onMessage).addListener.apply(_browserAPI$runtime$o, arguments);\n  })(dispatchResponse, shouldDeserialize);\n  /**\r\n   * Setup external action handler\r\n   */\n\n  if (browserAPI.runtime.onMessageExternal) {\n    withPayloadDeserializer(function () {\n      var _browserAPI$runtime$o2;\n\n      return (_browserAPI$runtime$o2 = browserAPI.runtime.onMessageExternal).addListener.apply(_browserAPI$runtime$o2, arguments);\n    })(dispatchResponse, shouldDeserialize);\n  } else {\n    console.warn('runtime.onMessageExternal is not supported');\n  }\n  /**\r\n   * Setup extended connection\r\n   */\n\n\n  browserAPI.runtime.onConnect.addListener(connectState);\n  /**\r\n   * Setup extended external connection\r\n   */\n\n  if (browserAPI.runtime.onConnectExternal) {\n    browserAPI.runtime.onConnectExternal.addListener(connectState);\n  } else {\n    console.warn('runtime.onConnectExternal is not supported');\n  }\n  /**\r\n   * Safety message to tabs for content scripts\r\n   */\n\n\n  browserAPI.tabs.query({}, function (tabs) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = tabs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var tab = _step.value;\n        browserAPI.tabs.sendMessage(tab.id, {\n          action: 'storeReady',\n          portName: portName\n        }, function () {\n          if (chrome.runtime.lastError) {// do nothing - errors can be present\n            // if no content script exists on reciever\n          }\n        });\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  }); // For non-tab based\n  // TODO: Find use case for this. Ommiting until then.\n  // browserAPI.runtime.sendMessage(null, {action: 'storeReady'});\n};\n\nexports.default = _default;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"youtube-subtitles-extension:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"sidebar\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkyoutube_subtitles_extension\"] = self[\"webpackChunkyoutube_subtitles_extension\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","/**\n * Sidebar module for YouTube subtitles extension\n * @module sidebar\n */\n\n// Import dependencies\nimport { \n  Config, \n  toggleLiveCaptions, \n  forceLiveCaptionsDisabled, \n  SUPPORTED_LANGUAGES \n} from './lib/config.js';\nimport { initializeTheme, handleThemeToggle } from './lib/ui/theme.js';\nimport { initializeFontSize, toggleFontSizeMenu } from './lib/ui/fontManager.js';\nimport { initStoreSubscription, cleanupStore } from './lib/services/storeService.js';\nimport { userMock, toggleMockMode } from './lib/services/mockService.js';\nimport { updateTranscriptDisplay, autoSummarize } from './lib/services/transcriptService.js';\nimport { initializeConfigUI, toggleConfigMenu, saveSrtProvider, getSrtProvider } from './lib/ui/configManager.js';\n\n// Initialize global state\nconst initPreferredLanguage = async () => {\n  const savedLang = await Config.getPreferredLanguage();\n  return savedLang || 'en';\n};\n\n// Initialize state using async function\n(async () => {\n  if (!window.state) {\n    const initialLang = await initPreferredLanguage();\n    console.log('[Sidebar] Initializing with language:', initialLang);\n    window.state = {\n      store: null,\n      transcriptFetcher: null,\n      preferredLanguage: initialLang\n    };\n  }\n})().catch(error => {\n  console.error('[Sidebar] Error initializing state:', error);\n  // Fallback to basic initialization if async init fails\n  if (!window.state) {\n    window.state = {\n      store: null,\n      transcriptFetcher: null,\n      preferredLanguage: 'en'\n    };\n  }\n});\n\n// Local reference to global state\nconst state = window.state;\n\n// DOM element references\nlet elements = null;\n\n// Initialize DOM elements\nasync function initElements() {\n  elements = {\n    transcript: document.querySelector('#transcript'),\n    format: document.querySelector('#format'),\n    themeToggle: document.querySelector('#themeToggle'),\n    refreshButton: document.querySelector('#refreshButton'),\n    configButton: document.querySelector('#configButton'),\n    configMenu: document.querySelector('#configMenu'),\n    saveConfigBtn: document.querySelector('#saveConfigBtn'),\n    cancelConfigBtn: document.querySelector('#cancelConfigBtn'),\n    srtProviderInput: document.querySelector('#srtProviderInput'),\n    copyButton: document.querySelector('.copy-button'),\n    transcriptCopyBtn: document.querySelector('#transcriptCopyBtn'),\n    transcriptContainer: document.querySelector('.transcript'),\n    transcriptToolbar: document.querySelector('.transcript-toolbar'),\n    basicInfo: document.querySelector('.video-info'),\n    summaryContainer: document.querySelector('.summary-container'),\n    summaryToolbar: document.querySelector('.summary-toolbar'),\n    videoTitle: document.querySelector('#title'),\n    videoId: document.querySelector('#videoId'),\n    summary: document.querySelector('#summary'),\n    uiLang: document.querySelector('#uiLang'),\n    fontSizeBtn: document.querySelector('#fontSizeBtn'),\n    fontSizeMenu: document.querySelector('#fontSizeMenu'),\n  };\n\n  // Set initial language value from Config\n  if (elements.uiLang) {\n    try {\n      const savedLang = await Config.getPreferredLanguage();\n      // Only set the value if it's one of our supported languages\n      if (savedLang && SUPPORTED_LANGUAGES.includes(savedLang)) {\n        elements.uiLang.value = savedLang;\n      } else {\n        console.warn('[Sidebar] Invalid or missing language preference:', savedLang);\n      }\n    } catch (error) {\n      console.error('[Sidebar] Error loading language preference:', error);\n    }\n  }\n\n  // Initialize font size\n  await initializeFontSize(elements);\n\n  // Initialize configuration UI\n  await initializeConfigUI(elements);\n\n  // Verify all elements are found\n  Object.entries(elements).forEach(([name, element]) => {\n    if (!element) {\n      console.error(`[Sidebar] Element not found: ${name}`);\n    }\n  });\n\n  return elements;\n}\n\n// Update refresh button state\nfunction updateRefreshButton(needsRefresh) {\n  const refreshButton = document.querySelector('#refreshButton');\n  console.log('[Sidebar] Updating refresh button:', {\n    buttonFound: !!refreshButton,\n    needsRefresh,\n    currentClasses: refreshButton?.classList.toString(),\n    timestamp: Date.now(),\n  });\n\n  if (refreshButton) {\n    if (needsRefresh) {\n      console.log('[Sidebar] Setting refresh button to inactive state');\n      refreshButton.classList.add('needs-refresh');\n      refreshButton.classList.add('theme-toggle');\n      refreshButton.title = 'Connection lost - click to refresh';\n    } else {\n      console.log('[Sidebar] Setting refresh button to active state');\n      refreshButton.classList.remove('needs-refresh');\n      refreshButton.classList.add('theme-toggle');\n      refreshButton.title = 'Refresh captions';\n    }\n\n    // Log final state\n    console.log('[Sidebar] Refresh button updated:', {\n      hasNeedsRefreshClass: refreshButton.classList.contains('needs-refresh'),\n      title: refreshButton.title,\n      allClasses: refreshButton.classList.toString(),\n    });\n  } else {\n    console.error('[Sidebar] Refresh button element not found');\n  }\n}\n\n// Set up event listeners\nasync function setupEventListeners() {\n  if (!elements) {\n    console.log('[Sidebar] Initializing elements...');\n    elements = await initElements();\n  }\n\n  // Theme toggle\n  elements.themeToggle?.addEventListener('click', () => handleThemeToggle(elements));\n\n  // Font size button\n  elements.fontSizeBtn?.addEventListener('click', (e) => {\n    e.stopPropagation();\n    const isVisible = elements.fontSizeMenu?.classList.contains('visible');\n    toggleFontSizeMenu(elements, !isVisible);\n  });\n\n  // Refresh button\n  elements.refreshButton?.addEventListener('click', () => {\n    console.log('[Sidebar] Refresh button clicked');\n    // Reset button state immediately when clicked\n    updateRefreshButton(false);\n\n    // Find current YouTube tab and refresh subtitles\n    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n      if (tabs[0]) {\n        const tabId = tabs[0].id;\n        console.log('[Sidebar] Found active tab, refreshing subtitles');\n        \n        // Send message to content script to refresh subtitles while preserving position\n        chrome.tabs.sendMessage(tabId, { \n          type: 'REFRESH_SUBTITLES',\n          preservePosition: true\n        }, async (response) => {\n          if (chrome.runtime.lastError) {\n            console.error('[Sidebar] Error refreshing:', chrome.runtime.lastError);\n            return;\n          }\n          \n          if (response?.success) {\n            // Refresh sidebar content without full reload\n            const currentState = state.store?.getState();\n            if (currentState?.videoId && state.transcriptFetcher) {\n              try {\n                await updateTranscriptDisplay(elements, currentState, state.transcriptFetcher);\n                console.log('[Sidebar] Transcript refreshed successfully');\n              } catch (error) {\n                console.error('[Sidebar] Error refreshing transcript:', error);\n              }\n            }\n          }\n        });\n      } else {\n        console.log('[Sidebar] No active tab found');\n      }\n    });\n  });\n\n  // Copy button for summary\n  elements.copyButton?.addEventListener('click', async () => {\n    try {\n      const summaryText = elements.summary?.textContent || '';\n      await navigator.clipboard.writeText(summaryText);\n\n      // Show check icon\n      elements.copyButton.classList.add('copied');\n\n      // Reset back to copy icon after 3 seconds\n      setTimeout(() => {\n        elements.copyButton.classList.remove('copied');\n      }, 3000);\n    } catch (error) {\n      console.error('[Sidebar] Failed to copy text:', error);\n    }\n  });\n\n  // Copy button for transcript\n  elements.transcriptCopyBtn?.addEventListener('click', async () => {\n    try {\n      const transcriptText = elements.transcript?.textContent || '';\n      await navigator.clipboard.writeText(transcriptText);\n\n      // Show visual feedback\n      const transcriptCopyBtn = elements.transcriptCopyBtn;\n      if (transcriptCopyBtn) {\n        transcriptCopyBtn.classList.add('copied');\n        setTimeout(() => {\n          transcriptCopyBtn.classList.remove('copied');\n        }, 3000);\n      }\n      console.log('[Sidebar] Copied transcript to clipboard');\n    } catch (error) {\n      console.error('[Sidebar] Failed to copy transcript:', error);\n    }\n  });\n\n  // Video ID click to copy URL\n  elements.videoId?.addEventListener('click', async () => {\n    try {\n      const videoId = elements.videoId.textContent.replace('Video ID: ', '').trim();\n      const youtubeUrl = `https://www.youtube.com/watch?v=${videoId}`;\n      await navigator.clipboard.writeText(youtubeUrl);\n    } catch (error) {\n      console.error('[Sidebar] Failed to copy video URL:', error);\n    }\n  });\n\n  // Format change handler\n  elements.format?.addEventListener('change', async () => {\n    const currentState = state.store?.getState();\n    const transcriptFetcher = state.transcriptFetcher;\n\n    if (!currentState?.videoId) {\n      console.error('[Sidebar] No video ID available for format change');\n      return;\n    }\n\n    if (!transcriptFetcher) {\n      console.error('[Sidebar] TranscriptFetcher not initialized');\n      return;\n    }\n\n    try {\n      // Update the format and use updateTranscriptDisplay to ensure consistent formatting\n      currentState.format = elements.format?.value || 'text';\n      // Pass skipSummaryGeneration=true to avoid regenerating the summary when only changing format\n      await updateTranscriptDisplay(elements, currentState, transcriptFetcher, { skipSummaryGeneration: true });\n    } catch (error) {\n      console.error('[Sidebar] Error updating transcript format:', error);\n    }\n  });\n\n  // Add language change handler\n  // Add language change handler\n  elements.uiLang?.addEventListener('change', async () => {\n    const newLang = elements.uiLang.value;\n    console.log('[Sidebar] Language change:', {\n      newLang,\n      element: elements.uiLang,\n      currentState: window.state\n    });\n\n    try {\n      // First update the language preference in storage\n      await Config.setPreferredLanguage(newLang);\n      console.log('[Sidebar] Updated language preference:', newLang);\n\n      // Update global state with new language\n      if (window.state) {\n        window.state.preferredLanguage = newLang;\n\n        // Refresh transcript with new language if we have necessary data\n        const currentState = window.state.store?.getState();\n        if (currentState?.videoId && window.state.transcriptFetcher) {\n          // Create a new state object with the updated language\n          const updatedState = {\n            ...currentState,\n            preferredLanguage: newLang\n          };\n\n          console.log('[Sidebar] Refreshing transcript with new language:', {\n            language: newLang,\n            videoId: currentState.videoId\n          });\n\n          // Get fresh elements for transcript update\n          const elements = {\n            transcript: document.querySelector('#transcript'),\n            format: document.querySelector('#format'),\n          };\n\n          // Show loading state\n          if (elements.transcript) {\n            elements.transcript.textContent = 'Updating transcript...';\n          }\n\n          await updateTranscriptDisplay(elements, updatedState, window.state.transcriptFetcher);\n        }\n      }\n    } catch (error) {\n      console.error('[Sidebar] Error refreshing transcript:', error);\n    }\n\n    // Disable live captions if English is selected\n    if (newLang === 'en') {\n      const ccBtn = document.getElementById('ccBtn');\n      if (ccBtn) {\n        ccBtn.classList.remove('active');\n        ccBtn.classList.add('inactive');\n      }\n      // Force disable live captions\n      forceLiveCaptionsDisabled();\n      // Dispatch event to disable live captions\n      window.dispatchEvent(new CustomEvent('liveCaptionsToggled', {\n        detail: { enabled: false }\n      }));\n      // Send message to content script\n      chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n        if (tabs[0]) {\n          chrome.tabs.sendMessage(tabs[0].id, {\n            type: 'UPDATE_CAPTIONS_LANGUAGE',\n            language: newLang,\n            disableLiveCaptions: true,\n            forceDisable: true\n          });\n        }\n      });\n    } else {\n      // Send message to content script to update language\n      chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n        if (tabs[0]) {\n          chrome.tabs.sendMessage(tabs[0].id, {\n            type: 'UPDATE_CAPTIONS_LANGUAGE',\n            language: newLang,\n            disableLiveCaptions: false\n          });\n        }\n      });\n    }\n  });\n\n  // Configuration button click handler\n  elements.configButton?.addEventListener('click', () => {\n    toggleConfigMenu(elements);\n  });\n\n  // Save configuration button click handler\n  elements.saveConfigBtn?.addEventListener('click', async () => {\n    try {\n      const urlToSave = elements.srtProviderInput.value;\n      console.log('[Sidebar] Attempting to save SRT provider:', urlToSave);\n      \n      const savedUrl = await saveSrtProvider(urlToSave);\n      console.log('[Sidebar] SRT provider save result:', savedUrl);\n      \n      // Verify the save was successful by reading it back\n      const verifiedUrl = await getSrtProvider();\n      console.log('[Sidebar] Verified saved SRT provider:', verifiedUrl);\n      \n      if (verifiedUrl) {\n        console.log('[Sidebar] SRT provider saved successfully');\n        // Close the menu after saving\n        toggleConfigMenu(elements, false);\n      } else {\n        console.error('[Sidebar] SRT provider verification failed, saved URL not found');\n        alert('Failed to save SRT provider URL. Please try again.');\n      }\n    } catch (error) {\n      console.error('[Sidebar] Error saving SRT provider:', error);\n      alert('Error saving SRT provider: ' + error.message);\n    }\n  });\n\n  // Cancel configuration button click handler\n  elements.cancelConfigBtn?.addEventListener('click', () => {\n    toggleConfigMenu(elements);\n  });\n}\n\n// Listen for messages from content script\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  console.log('[Sidebar] Received message:', {\n    type: request.type,\n    source: request.source,\n    timestamp: Date.now(),\n  });\n\n  if (request.type === 'UPDATE_REFRESH_BUTTON') {\n    console.log('[Sidebar] Updating refresh button from content script:', {\n      needsRefresh: request.needsRefresh,\n      source: request.source,\n      timestamp: Date.now(),\n    });\n    updateRefreshButton(request.needsRefresh);\n    sendResponse({ success: true });\n  }\n  return true;\n});\n\n// Initialize everything when the document is ready\ndocument.addEventListener('DOMContentLoaded', async () => {\n  // Initialize elements and event listeners\n  await setupEventListeners();\n  \n  // Initialize theme\n  await initializeTheme(elements);\n  \n  // Initialize store subscription\n  await initStoreSubscription(elements);\n\n  // Initialize CC button state\n  const ccBtn = document.getElementById('ccBtn');\n  if (ccBtn) {\n    // Get initial state from storage\n    const isEnabled = await Config.getLiveCaptionsEnabled();\n    ccBtn.classList.toggle('active', isEnabled);\n    ccBtn.classList.toggle('inactive', !isEnabled);\n    \n    ccBtn.addEventListener('click', async () => {\n      const preferredLang = await Config.getPreferredLanguage();\n      \n      if (preferredLang === 'en') {\n        console.log('[Sidebar] CC button click ignored - English selected');\n        return;\n      }\n      \n      // Toggle live captions and update UI state\n      const isEnabled = await toggleLiveCaptions();\n      ccBtn.classList.toggle('active', isEnabled);\n      ccBtn.classList.toggle('inactive', !isEnabled);\n\n      // Only notify content script about live captions state\n      chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n        if (tabs[0]) {\n          chrome.tabs.sendMessage(tabs[0].id, {\n            type: 'UPDATE_CAPTIONS_LANGUAGE',\n            language: preferredLang,\n            disableLiveCaptions: !isEnabled\n          });\n        }\n      });\n    });\n  }\n\n  // Initialize bullet list button state\n  const bulletListBtn = document.getElementById('bulletListBtn');\n  if (bulletListBtn) {\n    // Get initial state from Config\n    const isEnabled = await Config.getBulletListEnabled();\n    bulletListBtn.classList.toggle('active', isEnabled);\n    bulletListBtn.classList.toggle('inactive', !isEnabled);\n    \n    bulletListBtn.addEventListener('click', async () => {\n      const isEnabled = bulletListBtn.classList.contains('inactive');\n      \n      // Store state in Config\n      await Config.setBulletListEnabled(isEnabled);\n      \n      bulletListBtn.classList.toggle('active', isEnabled);\n      bulletListBtn.classList.toggle('inactive', !isEnabled);\n\n      // Get current transcript content\n      const transcript = document.getElementById('transcript');\n      const summary = document.getElementById('summary');\n      \n      if (transcript && summary) {\n        try {\n          // Show loading state\n          summary.textContent = 'Loading summary...';\n          summary.classList.add('translating');\n          \n          // Get current state\n          const currentState = state.store.getState();\n          const targetLang = currentState.preferredLanguage;\n          \n          // Check if we're using proxy SRT\n          const isProxySource = currentState.isProxySource === true;\n          const proxy = isProxySource ? currentState.proxy : null;\n\n          // Request new summary with updated mode\n          await autoSummarize({\n            videoId: currentState.videoId,\n            title: currentState.title,\n            transcriptArg: currentState.transcriptArg,\n            preferredLanguage: targetLang,\n            isProxySource: isProxySource,\n            proxy: proxy,\n            mode: isEnabled ? 'bullet' : 'narrative'\n          }, transcript.textContent, targetLang);\n\n          summary.classList.remove('translating');\n        } catch (error) {\n          console.error('[Sidebar] Error updating summary:', error);\n          summary.textContent = 'Failed to update summary. Please try again.';\n          summary.classList.add('error');\n        }\n      }\n    });\n  }\n});\n\n// Clean up on unload\nwindow.addEventListener('unload', () => {\n  cleanupStore();\n});\n\n// Add CSS for refresh button states\nconst style = document.createElement('style');\nstyle.textContent = `\n  #refreshButton.needs-refresh {\n    background-color: #ff9800 !important;\n    animation: pulse 2s infinite;\n  }\n\n  .error {\n    color: var(--text-secondary) !important;\n    font-style: italic;\n  }\n\n  .loading {\n    opacity: 0.7;\n  }\n\n  .translating {\n    opacity: 0.7;\n  }\n\n  /* Error state transitions */\n  .error {\n    transition: all 0.3s ease-in-out;\n  }\n`;\ndocument.head.appendChild(style);\n\n// Expose mock functions to window for console access\nwindow.userMock = userMock;\nwindow.toggleMockMode = toggleMockMode;\n// Make updateRefreshButton accessible from content script\nwindow.updateRefreshButton = updateRefreshButton;\n"],"names":["isDev","chrome","runtime","getManifest","version","includes","location","hostname","id","console","log","CURRENT_CONFIG_VERSION","SUPPORTED_LANGUAGES","FONT_SIZES","DEFAULT_FONT_SIZE","DEFAULT_SRT_PROVIDER","undefined","API_CONFIG","BASE_URL","ENDPOINTS","TRANSCRIBE","TRANSLATE","TRANSCRIPT","SUMMARIZE","SUBTITLES_CONFIG","BATCH_SIZE","MAX_CONCURRENT_BATCHES","UPDATE_INTERVAL","ENABLE_LIVE_SUBTITLES","STYLES","CONTAINER","position","bottom","left","right","textAlign","zIndex","pointerEvents","display","flexDirection","alignItems","padding","SUBTITLE_BLOCK","backgroundColor","borderRadius","width","margin","ZH_TW","fontSize","fontFamily","color","textShadow","marginBottom","EN","toggleLiveCaptions","currentState","Config","getLiveCaptionsEnabled","newState","setLiveCaptionsEnabled","tabs","query","active","currentWindow","sendMessage","type","enabled","forceLiveCaptionsDisabled","defaultPreferences","preferences","language","value","lastUpdated","Date","now","liveCaptions","allowedValues","bulletList","srtProvider","get","config","storage","local","migrateConfig","save","error","JSON","stringify","set","initialize","updated","key","oldConfig","newConfig","preferredCaptionLanguage","liveCaptionsEnabled","parseInt","localStorage","getItem","bulletListEnabled","getPreferredLanguage","setPreferredLanguage","lang","validLang","getFontSize","setFontSize","size","validSize","getBulletListEnabled","setBulletListEnabled","getSrtProvider","setSrtProvider","provider","verifyConfig","YouTubeTranscriptError","Error","constructor","message","name","TranscriptFetcher","playerData","videoId","options","session","pageHtml","preferredLanguage","cache","Map","transcriptUrl","transcriptArg","transcriptXML","parseYouTubeXML","xml","textElements","regex","match","exec","start","parseFloat","duration","text","replace","push","getTranscriptArg","fetchTranscript","captions","captionsJson","playerCaptionsTracklistRenderer","debug","_getTranscriptUrl","getTranscript","baseUrl","html","_fetchVideoHtml","_extractCaptionsJson","captionsData","preferredLang","captionTracks","length","normalizedWanted","toLowerCase","selectedTrack","find","t","languageCode","tracks","availableLangs","map","join","wanted","available","selectedLang","targetLang","isPreferredLang","trackInfo","kind","preferred","track","_createSession","url","response","fetch","ok","status","urlParts","split","_decodeHtmlEntities","textarea","document","createElement","innerHTML","fetchTranscriptWithFormat","format","transcript","formatted","formatSRT","formatDigest","entry","index","startTime","_formatTimestamp","endTime","item","seconds","hours","Math","floor","minutes","secs","ms","hh","toString","padStart","mm","ss","msec","playerResponseMatch","playerResponse","parse","e","random","substring","timestamp","getBatchFromTimestamp","batchSize","entryIndex","findIndex","entryEnd","batchNumber","batchStart","batchEnd","min","batchRange","end","totalBatches","ceil","getCurrentBatch","player","currentTime","getCurrentTime","getTranscriptXML","showAlert","mockState","errorType","target","targets","userMock","Object","keys","alert","classList","add","updateMockModeIndicator","getMockErrorResponse","errors","json","Promise","resolve","mockFetch","isTranscript","body","requestBody","isSummary","action","isTranslate","shouldMock","summary","translate","requestType","toggleMockMode","indicator","querySelector","className","prepend","entries","code","textContent","remove","getMockState","Store","handleError","updateTranscriptDisplay","window","state","lastVideoId","lastProcessedTimestamp","lastSummary","transcriptFetcher","isProcessingContent","store","lastConnectionAttempt","getStore","updateBasicInfo","elements","storeState","videoTitle","title","initStoreSubscription","portName","reconnectOnDocumentReady","ready","toISOString","readyState","updateTimeout","subscribe","clearTimeout","setTimeout","getState","hasPlayerData","hasCaptions","hasProxyData","isProxySource","proxyUrl","fetcher","initialState","cleanupStore","getStoreState","normalizeNewlines","trim","normalizeLanguageCode","lowerLang","normalizedLang","input","output","toggleConvertButtons","show","convertButtons","autoSummarize","appState","existingTranscript","hasTranscript","hasTitle","hasArg","summaryContainer","summaryToolbar","mode","isBulletMode","style","fontStyle","endpoint","isProxyRequest","proxy","summaryResponse","titleResponse","all","method","headers","arg","txt","errorResponse","errorMessage","errorData","summaryData","titleData","summaryText","translatedTitle","translation","titleElement","translatedTitleDiv","originalTitle","appendChild","skipSummaryGeneration","content","hasVideoId","hasCache","hasTranscriptUrl","hasTranscriptArg","hasTranscriptXML","hasRootTranscript","hasPlayerDataTranscript","proxyData","parseSRTContent","parsedContent","summaryError","warn","String","fetchProxySRT","getSrtProviderUrl","endsWith","slice","fetchError","hasPermission","permissions","contains","origins","then","alertContainer","existingAlerts","querySelectorAll","forEach","existing","removeAlert","closeButton","onclick","scrollIntoView","behavior","block","parentElement","opacity","children","initializeConfigUI","srtProviderInput","toggleConfigMenu","configMenu","shouldShow","fontSizeMenu","catch","addEventListener","closeConfigMenuOnClickOutside","removeEventListener","event","configButton","performDummyRequest","validUrl","startsWith","rootUrl","URL","origin","request","granted","lastError","saveSrtProvider","verifiedUrl","initializeFontSizeMenu","currentSize","sizes","option","stopPropagation","handleFontSizeChange","toggleFontSizeMenu","newSize","toggle","handleClickOutside","fontSizeBtn","initializeFontSize","savedFontSize","defaultSize","initializeTheme","themeToggle","prefersDark","matchMedia","matches","savedTheme","theme","documentElement","setAttribute","updateThemeIcons","newTheme","isDark","sunIcon","moonIcon","handleThemeToggle","currentTheme","getAttribute","initPreferredLanguage","savedLang","initialLang","initElements","refreshButton","saveConfigBtn","cancelConfigBtn","copyButton","transcriptCopyBtn","transcriptContainer","transcriptToolbar","basicInfo","uiLang","element","updateRefreshButton","needsRefresh","buttonFound","currentClasses","hasNeedsRefreshClass","allClasses","setupEventListeners","isVisible","tabId","preservePosition","success","navigator","clipboard","writeText","transcriptText","youtubeUrl","newLang","updatedState","ccBtn","getElementById","dispatchEvent","CustomEvent","detail","disableLiveCaptions","forceDisable","urlToSave","savedUrl","onMessage","addListener","sender","sendResponse","source","isEnabled","bulletListBtn","head"],"sourceRoot":""}